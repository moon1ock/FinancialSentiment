{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _merge = require(\"merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _util = require(\"../js/util\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n *  Copyright (c) 2016, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n/**\n * Renders a brush with the range defined in the prop `timeRange`.\n */\n\n\nvar Brush = function (_React$Component) {\n  _inherits(Brush, _React$Component);\n\n  function Brush(props) {\n    _classCallCheck(this, Brush);\n\n    var _this = _possibleConstructorReturn(this, (Brush.__proto__ || Object.getPrototypeOf(Brush)).call(this, props));\n\n    _this.state = {\n      isBrushing: false\n    };\n    _this.handleBrushMouseDown = _this.handleBrushMouseDown.bind(_this);\n    _this.handleOverlayMouseDown = _this.handleOverlayMouseDown.bind(_this);\n    _this.handleHandleMouseDown = _this.handleHandleMouseDown.bind(_this);\n    _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n    _this.handleClick = _this.handleClick.bind(_this);\n    _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n    return _this;\n  }\n\n  _createClass(Brush, [{\n    key: \"viewport\",\n    value: function viewport() {\n      var _props = this.props,\n          width = _props.width,\n          timeScale = _props.timeScale;\n      var viewBeginTime = timeScale.invert(0);\n      var viewEndTime = timeScale.invert(width);\n      return new _pondjs.TimeRange(viewBeginTime, viewEndTime);\n    } //\n    // Event handlers\n    //\n\n  }, {\n    key: \"handleBrushMouseDown\",\n    value: function handleBrushMouseDown(e) {\n      e.preventDefault();\n      var x = e.pageX,\n          y = e.pageY;\n      var xy0 = [Math.round(x), Math.round(y)];\n      var begin = +this.props.timeRange.begin();\n      var end = +this.props.timeRange.end();\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n      this.setState({\n        isBrushing: true,\n        brushingInitializationSite: \"brush\",\n        initialBrushBeginTime: begin,\n        initialBrushEndTime: end,\n        initialBrushXYPosition: xy0\n      });\n    }\n  }, {\n    key: \"handleOverlayMouseDown\",\n    value: function handleOverlayMouseDown(e) {\n      e.preventDefault();\n      var offset = (0, _util.getElementOffset)(this.overlay);\n      var x = e.pageX - offset.left;\n      var t = this.props.timeScale.invert(x).getTime();\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n      this.setState({\n        isBrushing: true,\n        brushingInitializationSite: \"overlay\",\n        initialBrushBeginTime: t,\n        initialBrushEndTime: t,\n        initialBrushXYPosition: null\n      });\n    }\n  }, {\n    key: \"handleHandleMouseDown\",\n    value: function handleHandleMouseDown(e, handle) {\n      e.preventDefault();\n      var x = e.pageX,\n          y = e.pageY;\n      var xy0 = [Math.round(x), Math.round(y)];\n      var begin = this.props.timeRange.begin().getTime();\n      var end = this.props.timeRange.end().getTime();\n      document.addEventListener(\"mouseover\", this.handleMouseMove);\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n      this.setState({\n        isBrushing: true,\n        brushingInitializationSite: \"handle-\" + handle,\n        initialBrushBeginTime: begin,\n        initialBrushEndTime: end,\n        initialBrushXYPosition: xy0\n      });\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(e) {\n      e.preventDefault();\n      document.removeEventListener(\"mouseover\", this.handleMouseMove);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp);\n      this.setState({\n        isBrushing: false,\n        brushingInitializationSite: null,\n        initialBrushBeginTime: null,\n        initialBrushEndTime: null,\n        initialBrushXYPosition: null\n      });\n    }\n    /**\n    * Handles clearing the TimeRange if the user clicks on the overlay (but\n    * doesn't drag to create a new brush). This will send a null as the\n    * new TimeRange. The user of this code can react to that however they\n    * see fit, but the most logical response is to reset the timerange to\n    * some initial value. This behavior is optional.\n    */\n\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      if (this.props.allowSelectionClear && this.props.onTimeRangeChanged) {\n        this.props.onTimeRangeChanged(null);\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e) {\n      e.preventDefault();\n      var x = e.pageX;\n      var y = e.pageY;\n      var xy = [Math.round(x), Math.round(y)];\n      var viewport = this.viewport();\n\n      if (this.state.isBrushing) {\n        var newBegin = void 0;\n        var newEnd = void 0;\n        var tb = this.state.initialBrushBeginTime;\n        var te = this.state.initialBrushEndTime;\n\n        if (this.state.brushingInitializationSite === \"overlay\") {\n          var offset = (0, _util.getElementOffset)(this.overlay);\n          var xx = e.pageX - offset.left;\n          var t = this.props.timeScale.invert(xx).getTime();\n\n          if (t < tb) {\n            newBegin = t < viewport.begin().getTime() ? viewport.begin() : t;\n            newEnd = tb > viewport.end().getTime() ? viewport.end() : tb;\n          } else {\n            newBegin = tb < viewport.begin().getTime() ? viewport.begin() : tb;\n            newEnd = t > viewport.end().getTime() ? viewport.end() : t;\n          }\n        } else {\n          var xy0 = this.state.initialBrushXYPosition;\n          var timeOffset = this.props.timeScale.invert(xy0[0]).getTime() - this.props.timeScale.invert(xy[0]).getTime(); // Constrain\n\n          var startOffsetConstraint = timeOffset;\n          var endOffsetConstrain = timeOffset;\n\n          if (tb - timeOffset < viewport.begin()) {\n            startOffsetConstraint = tb - viewport.begin().getTime();\n          }\n\n          if (te - timeOffset > viewport.end()) {\n            endOffsetConstrain = te - viewport.end().getTime();\n          }\n\n          newBegin = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-left\" ? parseInt(tb - startOffsetConstraint, 10) : tb;\n          newEnd = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-right\" ? parseInt(te - endOffsetConstrain, 10) : te; // Swap if needed\n\n          if (newBegin > newEnd) {\n            ;\n            var _ref = [newEnd, newBegin];\n            newBegin = _ref[0];\n            newEnd = _ref[1];\n          }\n        }\n\n        if (this.props.onTimeRangeChanged) {\n          this.props.onTimeRangeChanged(new _pondjs.TimeRange(newBegin, newEnd));\n        }\n      }\n    } //\n    // Render\n    //\n\n  }, {\n    key: \"renderOverlay\",\n    value: function renderOverlay() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height;\n      var cursor = void 0;\n\n      switch (this.state.brushingInitializationSite) {\n        case \"handle-right\":\n        case \"handle-left\":\n          cursor = \"ew-resize\";\n          break;\n\n        case \"brush\":\n          cursor = \"move\";\n          break;\n\n        default:\n          cursor = \"crosshair\";\n      }\n\n      var overlayStyle = {\n        fill: \"white\",\n        opacity: 0,\n        cursor: cursor\n      };\n      return _react2.default.createElement(\"rect\", {\n        ref: function ref(c) {\n          _this2.overlay = c;\n        },\n        x: 0,\n        y: 0,\n        width: width,\n        height: height,\n        style: overlayStyle,\n        onMouseDown: this.handleOverlayMouseDown,\n        onMouseUp: this.handleMouseUp,\n        onClick: this.handleClick\n      });\n    }\n  }, {\n    key: \"renderBrush\",\n    value: function renderBrush() {\n      var _props3 = this.props,\n          timeRange = _props3.timeRange,\n          timeScale = _props3.timeScale,\n          height = _props3.height,\n          style = _props3.style;\n\n      if (!timeRange) {\n        return _react2.default.createElement(\"g\", null);\n      }\n\n      var cursor = void 0;\n\n      switch (this.state.brushingInitializationSite) {\n        case \"handle-right\":\n        case \"handle-left\":\n          cursor = \"ew-resize\";\n          break;\n\n        case \"overlay\":\n          cursor = \"crosshair\";\n          break;\n\n        default:\n          cursor = \"move\";\n      } // Style of the brush area\n\n\n      var brushDefaultStyle = {\n        fill: \"#777\",\n        fillOpacity: 0.3,\n        stroke: \"#fff\",\n        shapeRendering: \"crispEdges\",\n        cursor: cursor\n      };\n      var brushStyle = (0, _merge2.default)(true, brushDefaultStyle, style);\n\n      if (!this.viewport().disjoint(timeRange)) {\n        var range = timeRange.intersection(this.viewport());\n        var begin = range.begin();\n        var end = range.end();\n        var _ref2 = [timeScale(begin), 0],\n            x = _ref2[0],\n            y = _ref2[1];\n        var endPos = timeScale(end);\n        var width = endPos - x;\n\n        if (width < 1) {\n          width = 1;\n        }\n\n        var bounds = {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        };\n        return _react2.default.createElement(\"rect\", _extends({}, bounds, {\n          style: brushStyle,\n          pointerEvents: \"all\",\n          onMouseDown: this.handleBrushMouseDown,\n          onMouseUp: this.handleMouseUp\n        }));\n      }\n\n      return _react2.default.createElement(\"g\", null);\n    }\n  }, {\n    key: \"renderHandles\",\n    value: function renderHandles() {\n      var _this3 = this;\n\n      var _props4 = this.props,\n          timeRange = _props4.timeRange,\n          timeScale = _props4.timeScale,\n          height = _props4.height;\n\n      if (!timeRange) {\n        return _react2.default.createElement(\"g\", null);\n      } // Style of the handles\n\n\n      var handleStyle = {\n        fill: \"white\",\n        opacity: 0,\n        cursor: \"ew-resize\"\n      };\n\n      if (!this.viewport().disjoint(timeRange)) {\n        var range = timeRange.intersection(this.viewport());\n\n        var _range$toJSON = range.toJSON(),\n            _range$toJSON2 = _slicedToArray(_range$toJSON, 2),\n            begin = _range$toJSON2[0],\n            end = _range$toJSON2[1];\n\n        var _ref3 = [timeScale(begin), 0],\n            x = _ref3[0],\n            y = _ref3[1];\n        var endPos = timeScale(end);\n        var width = endPos - x;\n\n        if (width < 1) {\n          width = 1;\n        }\n\n        var handleSize = this.props.handleSize;\n        var leftHandleBounds = {\n          x: x - 1,\n          y: y,\n          width: handleSize,\n          height: height\n        };\n        var rightHandleBounds = {\n          x: x + (width - handleSize),\n          y: y,\n          width: handleSize + 1,\n          height: height\n        };\n        return _react2.default.createElement(\"g\", null, _react2.default.createElement(\"rect\", _extends({}, leftHandleBounds, {\n          style: handleStyle,\n          pointerEvents: \"all\",\n          onMouseDown: function onMouseDown(e) {\n            return _this3.handleHandleMouseDown(e, \"left\");\n          },\n          onMouseUp: this.handleMouseUp\n        })), _react2.default.createElement(\"rect\", _extends({}, rightHandleBounds, {\n          style: handleStyle,\n          pointerEvents: \"all\",\n          onMouseDown: function onMouseDown(e) {\n            return _this3.handleHandleMouseDown(e, \"right\");\n          },\n          onMouseUp: this.handleMouseUp\n        })));\n      }\n\n      return _react2.default.createElement(\"g\", null);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\"g\", {\n        onMouseMove: this.handleMouseMove\n      }, this.renderOverlay(), this.renderBrush(), this.renderHandles());\n    }\n  }]);\n\n  return Brush;\n}(_react2.default.Component);\n\nexports.default = Brush;\nBrush.propTypes = {\n  /**\n  * The timerange for the brush. Typically you would maintain this\n  * as state on the surrounding page, since it would likely control\n  * another page element, such as the range of the main chart. See\n  * also `onTimeRangeChanged()` for receiving notification of the\n  * brush range being changed by the user.\n  *\n  * Takes a Pond TimeRange object.\n  */\n  timeRange: _propTypes2.default.instanceOf(_pondjs.TimeRange),\n\n  /**\n  * The brush is rendered as an SVG rect. You can specify the style\n  * of this rect using this prop.\n  */\n  style: _propTypes2.default.object,\n  //eslint-disable-line\n\n  /**\n  * The size of the invisible side handles. Defaults to 6 pixels.\n  */\n  handleSize: _propTypes2.default.number,\n  allowSelectionClear: _propTypes2.default.bool,\n\n  /**\n  * A callback which will be called if the brush range is changed by\n  * the user. It is called with a Pond TimeRange object. Note that if\n  * `allowSelectionClear` is set to true, then this can also be called\n  * when the user performs a simple click outside the brush area. In\n  * this case it will be called with null as the TimeRange. You can\n  * use this to reset the selection, perhaps to some initial range.\n  */\n  onTimeRangeChanged: _propTypes2.default.func,\n\n  /**\n  * [Internal] The timeScale supplied by the surrounding ChartContainer\n  */\n  timeScale: _propTypes2.default.func,\n\n  /**\n  * [Internal] The width supplied by the surrounding ChartContainer\n  */\n  width: _propTypes2.default.number,\n\n  /**\n  * [Internal] The height supplied by the surrounding ChartContainer\n  */\n  height: _propTypes2.default.number\n};\nBrush.defaultProps = {\n  handleSize: 6,\n  allowSelectionClear: false\n};","map":{"version":3,"sources":["/Users/nicholasraffone/Documents/swefall2021/finalproj/FinancialSentiment/fin_sentiment_front/node_modules/react-timeseries-charts/lib/components/Brush.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_merge","require","_merge2","_interopRequireDefault","_react","_react2","_propTypes","_propTypes2","_pondjs","_util","obj","__esModule","default","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Brush","_React$Component","_this","getPrototypeOf","state","isBrushing","handleBrushMouseDown","bind","handleOverlayMouseDown","handleHandleMouseDown","handleMouseUp","handleClick","handleMouseMove","viewport","_props","width","timeScale","viewBeginTime","invert","viewEndTime","TimeRange","e","preventDefault","x","pageX","y","pageY","xy0","Math","round","begin","timeRange","end","document","addEventListener","setState","brushingInitializationSite","initialBrushBeginTime","initialBrushEndTime","initialBrushXYPosition","offset","getElementOffset","overlay","left","t","getTime","handle","removeEventListener","allowSelectionClear","onTimeRangeChanged","xy","newBegin","newEnd","tb","te","xx","timeOffset","startOffsetConstraint","endOffsetConstrain","parseInt","_ref","renderOverlay","_this2","_props2","height","cursor","overlayStyle","fill","opacity","createElement","ref","c","style","onMouseDown","onMouseUp","onClick","renderBrush","_props3","brushDefaultStyle","fillOpacity","stroke","shapeRendering","brushStyle","disjoint","range","intersection","_ref2","endPos","bounds","pointerEvents","renderHandles","_this3","_props4","handleStyle","_range$toJSON","toJSON","_range$toJSON2","_ref3","handleSize","leftHandleBounds","rightHandleBounds","render","onMouseMove","Component","propTypes","instanceOf","object","number","bool","func","defaultProps"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _merge = require(\"merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _util = require(\"../js/util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  Copyright (c) 2016, The Regents of the University of California,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  through Lawrence Berkeley National Laboratory (subject to receipt\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  of any required approvals from the U.S. Dept. of Energy).\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  LICENSE file in the root directory of this source tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * Renders a brush with the range defined in the prop `timeRange`.\n */\nvar Brush = function (_React$Component) {\n    _inherits(Brush, _React$Component);\n\n    function Brush(props) {\n        _classCallCheck(this, Brush);\n\n        var _this = _possibleConstructorReturn(this, (Brush.__proto__ || Object.getPrototypeOf(Brush)).call(this, props));\n\n        _this.state = {\n            isBrushing: false\n        };\n\n        _this.handleBrushMouseDown = _this.handleBrushMouseDown.bind(_this);\n        _this.handleOverlayMouseDown = _this.handleOverlayMouseDown.bind(_this);\n        _this.handleHandleMouseDown = _this.handleHandleMouseDown.bind(_this);\n        _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n        return _this;\n    }\n\n    _createClass(Brush, [{\n        key: \"viewport\",\n        value: function viewport() {\n            var _props = this.props,\n                width = _props.width,\n                timeScale = _props.timeScale;\n\n            var viewBeginTime = timeScale.invert(0);\n            var viewEndTime = timeScale.invert(width);\n            return new _pondjs.TimeRange(viewBeginTime, viewEndTime);\n        }\n\n        //\n        // Event handlers\n        //\n\n    }, {\n        key: \"handleBrushMouseDown\",\n        value: function handleBrushMouseDown(e) {\n            e.preventDefault();\n\n            var x = e.pageX,\n                y = e.pageY;\n\n            var xy0 = [Math.round(x), Math.round(y)];\n            var begin = +this.props.timeRange.begin();\n            var end = +this.props.timeRange.end();\n\n            document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n            this.setState({\n                isBrushing: true,\n                brushingInitializationSite: \"brush\",\n                initialBrushBeginTime: begin,\n                initialBrushEndTime: end,\n                initialBrushXYPosition: xy0\n            });\n        }\n    }, {\n        key: \"handleOverlayMouseDown\",\n        value: function handleOverlayMouseDown(e) {\n            e.preventDefault();\n\n            var offset = (0, _util.getElementOffset)(this.overlay);\n            var x = e.pageX - offset.left;\n            var t = this.props.timeScale.invert(x).getTime();\n\n            document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n            this.setState({\n                isBrushing: true,\n                brushingInitializationSite: \"overlay\",\n                initialBrushBeginTime: t,\n                initialBrushEndTime: t,\n                initialBrushXYPosition: null\n            });\n        }\n    }, {\n        key: \"handleHandleMouseDown\",\n        value: function handleHandleMouseDown(e, handle) {\n            e.preventDefault();\n\n            var x = e.pageX,\n                y = e.pageY;\n\n            var xy0 = [Math.round(x), Math.round(y)];\n            var begin = this.props.timeRange.begin().getTime();\n            var end = this.props.timeRange.end().getTime();\n\n            document.addEventListener(\"mouseover\", this.handleMouseMove);\n            document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n            this.setState({\n                isBrushing: true,\n                brushingInitializationSite: \"handle-\" + handle,\n                initialBrushBeginTime: begin,\n                initialBrushEndTime: end,\n                initialBrushXYPosition: xy0\n            });\n        }\n    }, {\n        key: \"handleMouseUp\",\n        value: function handleMouseUp(e) {\n            e.preventDefault();\n\n            document.removeEventListener(\"mouseover\", this.handleMouseMove);\n            document.removeEventListener(\"mouseup\", this.handleMouseUp);\n\n            this.setState({\n                isBrushing: false,\n                brushingInitializationSite: null,\n                initialBrushBeginTime: null,\n                initialBrushEndTime: null,\n                initialBrushXYPosition: null\n            });\n        }\n\n        /**\n        * Handles clearing the TimeRange if the user clicks on the overlay (but\n        * doesn't drag to create a new brush). This will send a null as the\n        * new TimeRange. The user of this code can react to that however they\n        * see fit, but the most logical response is to reset the timerange to\n        * some initial value. This behavior is optional.\n        */\n\n    }, {\n        key: \"handleClick\",\n        value: function handleClick() {\n            if (this.props.allowSelectionClear && this.props.onTimeRangeChanged) {\n                this.props.onTimeRangeChanged(null);\n            }\n        }\n    }, {\n        key: \"handleMouseMove\",\n        value: function handleMouseMove(e) {\n            e.preventDefault();\n\n            var x = e.pageX;\n            var y = e.pageY;\n            var xy = [Math.round(x), Math.round(y)];\n            var viewport = this.viewport();\n\n            if (this.state.isBrushing) {\n                var newBegin = void 0;\n                var newEnd = void 0;\n\n                var tb = this.state.initialBrushBeginTime;\n                var te = this.state.initialBrushEndTime;\n\n                if (this.state.brushingInitializationSite === \"overlay\") {\n                    var offset = (0, _util.getElementOffset)(this.overlay);\n                    var xx = e.pageX - offset.left;\n                    var t = this.props.timeScale.invert(xx).getTime();\n                    if (t < tb) {\n                        newBegin = t < viewport.begin().getTime() ? viewport.begin() : t;\n                        newEnd = tb > viewport.end().getTime() ? viewport.end() : tb;\n                    } else {\n                        newBegin = tb < viewport.begin().getTime() ? viewport.begin() : tb;\n                        newEnd = t > viewport.end().getTime() ? viewport.end() : t;\n                    }\n                } else {\n                    var xy0 = this.state.initialBrushXYPosition;\n                    var timeOffset = this.props.timeScale.invert(xy0[0]).getTime() - this.props.timeScale.invert(xy[0]).getTime();\n\n                    // Constrain\n                    var startOffsetConstraint = timeOffset;\n                    var endOffsetConstrain = timeOffset;\n                    if (tb - timeOffset < viewport.begin()) {\n                        startOffsetConstraint = tb - viewport.begin().getTime();\n                    }\n                    if (te - timeOffset > viewport.end()) {\n                        endOffsetConstrain = te - viewport.end().getTime();\n                    }\n\n                    newBegin = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-left\" ? parseInt(tb - startOffsetConstraint, 10) : tb;\n                    newEnd = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-right\" ? parseInt(te - endOffsetConstrain, 10) : te;\n\n                    // Swap if needed\n                    if (newBegin > newEnd) {\n                        ;\n                        var _ref = [newEnd, newBegin];\n                        newBegin = _ref[0];\n                        newEnd = _ref[1];\n                    }\n                }\n\n                if (this.props.onTimeRangeChanged) {\n                    this.props.onTimeRangeChanged(new _pondjs.TimeRange(newBegin, newEnd));\n                }\n            }\n        }\n\n        //\n        // Render\n        //\n\n    }, {\n        key: \"renderOverlay\",\n        value: function renderOverlay() {\n            var _this2 = this;\n\n            var _props2 = this.props,\n                width = _props2.width,\n                height = _props2.height;\n\n\n            var cursor = void 0;\n            switch (this.state.brushingInitializationSite) {\n                case \"handle-right\":\n                case \"handle-left\":\n                    cursor = \"ew-resize\";\n                    break;\n                case \"brush\":\n                    cursor = \"move\";\n                    break;\n                default:\n                    cursor = \"crosshair\";\n            }\n\n            var overlayStyle = {\n                fill: \"white\",\n                opacity: 0,\n                cursor: cursor\n            };\n            return _react2.default.createElement(\"rect\", {\n                ref: function ref(c) {\n                    _this2.overlay = c;\n                },\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                style: overlayStyle,\n                onMouseDown: this.handleOverlayMouseDown,\n                onMouseUp: this.handleMouseUp,\n                onClick: this.handleClick\n            });\n        }\n    }, {\n        key: \"renderBrush\",\n        value: function renderBrush() {\n            var _props3 = this.props,\n                timeRange = _props3.timeRange,\n                timeScale = _props3.timeScale,\n                height = _props3.height,\n                style = _props3.style;\n\n\n            if (!timeRange) {\n                return _react2.default.createElement(\"g\", null);\n            }\n\n            var cursor = void 0;\n            switch (this.state.brushingInitializationSite) {\n                case \"handle-right\":\n                case \"handle-left\":\n                    cursor = \"ew-resize\";\n                    break;\n                case \"overlay\":\n                    cursor = \"crosshair\";\n                    break;\n                default:\n                    cursor = \"move\";\n            }\n\n            // Style of the brush area\n            var brushDefaultStyle = {\n                fill: \"#777\",\n                fillOpacity: 0.3,\n                stroke: \"#fff\",\n                shapeRendering: \"crispEdges\",\n                cursor: cursor\n            };\n            var brushStyle = (0, _merge2.default)(true, brushDefaultStyle, style);\n\n            if (!this.viewport().disjoint(timeRange)) {\n                var range = timeRange.intersection(this.viewport());\n                var begin = range.begin();\n                var end = range.end();\n                var _ref2 = [timeScale(begin), 0],\n                    x = _ref2[0],\n                    y = _ref2[1];\n\n                var endPos = timeScale(end);\n                var width = endPos - x;\n                if (width < 1) {\n                    width = 1;\n                }\n\n                var bounds = { x: x, y: y, width: width, height: height };\n\n                return _react2.default.createElement(\"rect\", _extends({}, bounds, {\n                    style: brushStyle,\n                    pointerEvents: \"all\",\n                    onMouseDown: this.handleBrushMouseDown,\n                    onMouseUp: this.handleMouseUp\n                }));\n            }\n            return _react2.default.createElement(\"g\", null);\n        }\n    }, {\n        key: \"renderHandles\",\n        value: function renderHandles() {\n            var _this3 = this;\n\n            var _props4 = this.props,\n                timeRange = _props4.timeRange,\n                timeScale = _props4.timeScale,\n                height = _props4.height;\n\n\n            if (!timeRange) {\n                return _react2.default.createElement(\"g\", null);\n            }\n\n            // Style of the handles\n            var handleStyle = {\n                fill: \"white\",\n                opacity: 0,\n                cursor: \"ew-resize\"\n            };\n\n            if (!this.viewport().disjoint(timeRange)) {\n                var range = timeRange.intersection(this.viewport());\n\n                var _range$toJSON = range.toJSON(),\n                    _range$toJSON2 = _slicedToArray(_range$toJSON, 2),\n                    begin = _range$toJSON2[0],\n                    end = _range$toJSON2[1];\n\n                var _ref3 = [timeScale(begin), 0],\n                    x = _ref3[0],\n                    y = _ref3[1];\n\n                var endPos = timeScale(end);\n\n                var width = endPos - x;\n                if (width < 1) {\n                    width = 1;\n                }\n\n                var handleSize = this.props.handleSize;\n\n                var leftHandleBounds = { x: x - 1, y: y, width: handleSize, height: height };\n                var rightHandleBounds = {\n                    x: x + (width - handleSize),\n                    y: y,\n                    width: handleSize + 1,\n                    height: height\n                };\n\n                return _react2.default.createElement(\n                    \"g\",\n                    null,\n                    _react2.default.createElement(\"rect\", _extends({}, leftHandleBounds, {\n                        style: handleStyle,\n                        pointerEvents: \"all\",\n                        onMouseDown: function onMouseDown(e) {\n                            return _this3.handleHandleMouseDown(e, \"left\");\n                        },\n                        onMouseUp: this.handleMouseUp\n                    })),\n                    _react2.default.createElement(\"rect\", _extends({}, rightHandleBounds, {\n                        style: handleStyle,\n                        pointerEvents: \"all\",\n                        onMouseDown: function onMouseDown(e) {\n                            return _this3.handleHandleMouseDown(e, \"right\");\n                        },\n                        onMouseUp: this.handleMouseUp\n                    }))\n                );\n            }\n            return _react2.default.createElement(\"g\", null);\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(\n                \"g\",\n                { onMouseMove: this.handleMouseMove },\n                this.renderOverlay(),\n                this.renderBrush(),\n                this.renderHandles()\n            );\n        }\n    }]);\n\n    return Brush;\n}(_react2.default.Component);\n\nexports.default = Brush;\n\n\nBrush.propTypes = {\n    /**\n    * The timerange for the brush. Typically you would maintain this\n    * as state on the surrounding page, since it would likely control\n    * another page element, such as the range of the main chart. See\n    * also `onTimeRangeChanged()` for receiving notification of the\n    * brush range being changed by the user.\n    *\n    * Takes a Pond TimeRange object.\n    */\n    timeRange: _propTypes2.default.instanceOf(_pondjs.TimeRange),\n    /**\n    * The brush is rendered as an SVG rect. You can specify the style\n    * of this rect using this prop.\n    */\n    style: _propTypes2.default.object, //eslint-disable-line\n    /**\n    * The size of the invisible side handles. Defaults to 6 pixels.\n    */\n    handleSize: _propTypes2.default.number,\n    allowSelectionClear: _propTypes2.default.bool,\n    /**\n    * A callback which will be called if the brush range is changed by\n    * the user. It is called with a Pond TimeRange object. Note that if\n    * `allowSelectionClear` is set to true, then this can also be called\n    * when the user performs a simple click outside the brush area. In\n    * this case it will be called with null as the TimeRange. You can\n    * use this to reset the selection, perhaps to some initial range.\n    */\n    onTimeRangeChanged: _propTypes2.default.func,\n    /**\n    * [Internal] The timeScale supplied by the surrounding ChartContainer\n    */\n    timeScale: _propTypes2.default.func,\n    /**\n    * [Internal] The width supplied by the surrounding ChartContainer\n    */\n    width: _propTypes2.default.number,\n    /**\n    * [Internal] The height supplied by the surrounding ChartContainer\n    */\n    height: _propTypes2.default.number\n};\n\nBrush.defaultProps = {\n    handleSize: 6,\n    allowSelectionClear: false\n};"]},"metadata":{},"sourceType":"script"}