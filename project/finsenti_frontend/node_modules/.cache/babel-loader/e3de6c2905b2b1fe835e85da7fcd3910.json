{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _underscore = _interopRequireDefault(require(\"underscore\"));\n\nvar _processor = _interopRequireDefault(require(\"./processor\"));\n\nvar _index = _interopRequireDefault(require(\"../index\"));\n\nvar _pipeline = require(\"../pipeline\");\n/**\n *  Copyright (c) 2016-2017, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n/**\n * A processor which takes an operator as its only option\n * and uses that to either output the event or skip the\n * event\n */\n\n\nclass Taker extends _processor.default {\n  constructor(arg1, options) {\n    super(arg1, options);\n\n    if (arg1 instanceof Taker) {\n      var other = arg1;\n      this._limit = other._limit;\n      this._windowType = other._windowType;\n      this._windowDuration = other._windowDuration;\n      this._groupBy = other._groupBy;\n    } else if ((0, _pipeline.isPipeline)(arg1)) {\n      var pipeline = arg1;\n      this._limit = options.limit;\n      this._windowType = pipeline.getWindowType();\n      this._windowDuration = pipeline.getWindowDuration();\n      this._groupBy = pipeline.getGroupBy();\n    } else {\n      throw new Error(\"Unknown arg to Taker constructor\", arg1);\n    }\n\n    this._count = {};\n  }\n\n  clone() {\n    return new Taker(this);\n  }\n\n  flush() {\n    super.flush();\n  }\n  /**\n   * Output an event that is offset\n   */\n\n\n  addEvent(event) {\n    if (this.hasObservers()) {\n      var timestamp = event.timestamp();\n      var windowType = this._windowType;\n      var windowKey;\n\n      if (windowType === \"fixed\") {\n        windowKey = _index.default.getIndexString(this._windowDuration, timestamp);\n      } else {\n        windowKey = windowType;\n      }\n\n      var groupByKey = this._groupBy(event);\n\n      var collectionKey = groupByKey ? \"\".concat(windowKey, \"::\").concat(groupByKey) : windowKey;\n\n      if (!_underscore.default.has(this._count, collectionKey)) {\n        this._count[collectionKey] = 0;\n      }\n\n      if (this._count[collectionKey] < this._limit) {\n        this.emit(event);\n      }\n\n      this._count[collectionKey]++;\n    }\n  }\n\n}\n\nexports.default = Taker;","map":{"version":3,"sources":["/Users/nicholasraffone/Documents/swefall2021/finalproj/FinancialSentiment/fin_sentiment_front/node_modules/pondjs/lib/lib/processors/taker.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_underscore","_processor","_index","_pipeline","Taker","constructor","arg1","options","other","_limit","_windowType","_windowDuration","_groupBy","isPipeline","pipeline","limit","getWindowType","getWindowDuration","getGroupBy","Error","_count","clone","flush","addEvent","event","hasObservers","timestamp","windowType","windowKey","getIndexString","groupByKey","collectionKey","concat","has","emit"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _underscore = _interopRequireDefault(require(\"underscore\"));\n\nvar _processor = _interopRequireDefault(require(\"./processor\"));\n\nvar _index = _interopRequireDefault(require(\"../index\"));\n\nvar _pipeline = require(\"../pipeline\");\n\n/**\n *  Copyright (c) 2016-2017, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n/**\n * A processor which takes an operator as its only option\n * and uses that to either output the event or skip the\n * event\n */\nclass Taker extends _processor.default {\n  constructor(arg1, options) {\n    super(arg1, options);\n\n    if (arg1 instanceof Taker) {\n      var other = arg1;\n      this._limit = other._limit;\n      this._windowType = other._windowType;\n      this._windowDuration = other._windowDuration;\n      this._groupBy = other._groupBy;\n    } else if ((0, _pipeline.isPipeline)(arg1)) {\n      var pipeline = arg1;\n      this._limit = options.limit;\n      this._windowType = pipeline.getWindowType();\n      this._windowDuration = pipeline.getWindowDuration();\n      this._groupBy = pipeline.getGroupBy();\n    } else {\n      throw new Error(\"Unknown arg to Taker constructor\", arg1);\n    }\n\n    this._count = {};\n  }\n\n  clone() {\n    return new Taker(this);\n  }\n\n  flush() {\n    super.flush();\n  }\n  /**\n   * Output an event that is offset\n   */\n\n\n  addEvent(event) {\n    if (this.hasObservers()) {\n      var timestamp = event.timestamp();\n      var windowType = this._windowType;\n      var windowKey;\n\n      if (windowType === \"fixed\") {\n        windowKey = _index.default.getIndexString(this._windowDuration, timestamp);\n      } else {\n        windowKey = windowType;\n      }\n\n      var groupByKey = this._groupBy(event);\n\n      var collectionKey = groupByKey ? \"\".concat(windowKey, \"::\").concat(groupByKey) : windowKey;\n\n      if (!_underscore.default.has(this._count, collectionKey)) {\n        this._count[collectionKey] = 0;\n      }\n\n      if (this._count[collectionKey] < this._limit) {\n        this.emit(event);\n      }\n\n      this._count[collectionKey]++;\n    }\n  }\n\n}\n\nexports.default = Taker;"]},"metadata":{},"sourceType":"script"}