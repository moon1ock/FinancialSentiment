{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _util = require(\"../js/util\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n *  Copyright (c) 2015-present, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n// eslint-disable-line\n\n/**\n * Internal component which provides the top level event catcher for the charts.\n * This is a higher order component. It wraps a tree of SVG elements below it,\n * passed in as this.props.children, and catches events that they do not handle.\n *\n * The EventHandler is responsible for pan and zoom events as well as other click\n * and hover actions.\n */\n\n\nvar EventHandler = function (_React$Component) {\n  _inherits(EventHandler, _React$Component);\n\n  function EventHandler(props) {\n    _classCallCheck(this, EventHandler);\n\n    var _this = _possibleConstructorReturn(this, (EventHandler.__proto__ || Object.getPrototypeOf(EventHandler)).call(this, props));\n\n    _this.state = {\n      isPanning: false,\n      initialPanBegin: null,\n      initialPanEnd: null,\n      initialPanPosition: null\n    };\n    _this.handleScrollWheel = _this.handleScrollWheel.bind(_this);\n    _this.handleMouseDown = _this.handleMouseDown.bind(_this);\n    _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n    _this.handleMouseOut = _this.handleMouseOut.bind(_this);\n    _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n    _this.handleContextMenu = _this.handleContextMenu.bind(_this);\n    return _this;\n  }\n\n  _createClass(EventHandler, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.eventHandlerRef.addEventListener(\"wheel\", this.handleScrollWheel, {\n        passive: false\n      });\n    } // get the event mouse position relative to the event rect\n\n  }, {\n    key: \"getOffsetMousePosition\",\n    value: function getOffsetMousePosition(e) {\n      var offset = (0, _util.getElementOffset)(this.eventRect);\n      var x = e.pageX - offset.left;\n      var y = e.pageY - offset.top;\n      return [Math.round(x), Math.round(y)];\n    } //\n    // Event handlers\n    //\n\n  }, {\n    key: \"handleScrollWheel\",\n    value: function handleScrollWheel(e) {\n      if (!this.props.enablePanZoom && !this.props.enableDragZoom) {\n        return;\n      }\n\n      e.preventDefault();\n      var SCALE_FACTOR = 0.001;\n      var scale = 1 + e.deltaY * SCALE_FACTOR;\n\n      if (scale > 3) {\n        scale = 3;\n      }\n\n      if (scale < 0.1) {\n        scale = 0.1;\n      }\n\n      var xy = this.getOffsetMousePosition(e);\n      var begin = this.props.scale.domain()[0].getTime();\n      var end = this.props.scale.domain()[1].getTime();\n      var center = this.props.scale.invert(xy[0]).getTime();\n      var beginScaled = center - parseInt((center - begin) * scale, 10);\n      var endScaled = center + parseInt((end - center) * scale, 10); // Duration constraint\n\n      var duration = (end - begin) * scale;\n\n      if (this.props.minDuration) {\n        var minDuration = parseInt(this.props.minDuration, 10);\n\n        if (duration < this.props.minDuration) {\n          beginScaled = center - (center - begin) / (end - begin) * minDuration;\n          endScaled = center + (end - center) / (end - begin) * minDuration;\n        }\n      }\n\n      if (this.props.minTime && this.props.maxTime) {\n        var maxDuration = this.props.maxTime.getTime() - this.props.minTime.getTime();\n\n        if (duration > maxDuration) {\n          duration = maxDuration;\n        }\n      } // Range constraint\n\n\n      if (this.props.minTime && beginScaled < this.props.minTime.getTime()) {\n        beginScaled = this.props.minTime.getTime();\n        endScaled = beginScaled + duration;\n      }\n\n      if (this.props.maxTime && endScaled > this.props.maxTime.getTime()) {\n        endScaled = this.props.maxTime.getTime();\n        beginScaled = endScaled - duration;\n      }\n\n      var newBegin = new Date(beginScaled);\n      var newEnd = new Date(endScaled);\n      var newTimeRange = new _pondjs.TimeRange(newBegin, newEnd);\n\n      if (this.props.onZoom) {\n        this.props.onZoom(newTimeRange);\n      }\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(e) {\n      if (!this.props.enablePanZoom && !this.props.enableDragZoom) {\n        return;\n      }\n\n      if (e.button === 2) {\n        return;\n      }\n\n      e.preventDefault();\n      document.addEventListener(\"mouseover\", this.handleMouseMove);\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n      if (this.props.enableDragZoom) {\n        var offsetxy = this.getOffsetMousePosition(e);\n        this.setState({\n          isDragging: true,\n          initialDragZoom: offsetxy[0],\n          currentDragZoom: offsetxy[0]\n        });\n      }\n\n      if (this.props.enablePanZoom) {\n        var x = e.pageX;\n        var y = e.pageY;\n        var xy0 = [Math.round(x), Math.round(y)];\n        var begin = this.props.scale.domain()[0].getTime();\n        var end = this.props.scale.domain()[1].getTime();\n        this.setState({\n          isPanning: true,\n          initialPanBegin: begin,\n          initialPanEnd: end,\n          initialPanPosition: xy0\n        });\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(e) {\n      if (!this.props.onMouseClick && !this.props.enablePanZoom && !this.props.enableDragZoom) {\n        return;\n      }\n\n      e.stopPropagation();\n      document.removeEventListener(\"mouseover\", this.handleMouseMove);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp);\n      var offsetxy = this.getOffsetMousePosition(e);\n      var x = e.pageX;\n      var isPanning = this.state.initialPanPosition && Math.abs(x - this.state.initialPanPosition[0]) > 2;\n      var isDragging = this.state.initialDragZoom && Math.abs(offsetxy[0] - this.state.initialDragZoom) > 2;\n\n      if (this.props.onMouseClick && !isPanning && !isDragging) {\n        this.props.onMouseClick(offsetxy[0], offsetxy[1]);\n      }\n\n      if (this.props.enableDragZoom) {\n        if (isDragging) {\n          var start = this.props.scale.invert(this.state.initialDragZoom).getTime();\n          var end = this.props.scale.invert(this.state.currentDragZoom).getTime();\n          var newBegin = parseInt(start, 10);\n          var newEnd = parseInt(end, 10);\n\n          if (this.props.minTime && newBegin < this.props.minTime.getTime()) {\n            newBegin = this.props.minTime.getTime();\n          }\n\n          if (this.props.maxTime && newEnd > this.props.maxTime.getTime()) {\n            newEnd = this.props.maxTime.getTime();\n          }\n\n          var newTimeRange = new _pondjs.TimeRange([newBegin, newEnd].sort());\n\n          if (this.props.onZoom) {\n            this.props.onZoom(newTimeRange);\n          }\n        }\n\n        this.setState({\n          isDragging: false,\n          initialDragZoom: null,\n          initialPanEnd: null,\n          currentDragZoom: null\n        });\n      }\n\n      if (this.props.enablePanZoom) {\n        this.setState({\n          isPanning: false,\n          initialPanBegin: null,\n          initialPanEnd: null,\n          initialPanPosition: null\n        });\n      }\n    }\n  }, {\n    key: \"handleMouseOut\",\n    value: function handleMouseOut(e) {\n      e.preventDefault();\n\n      if (this.props.onMouseOut) {\n        this.props.onMouseOut();\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e) {\n      e.preventDefault();\n      var x = e.pageX;\n      var y = e.pageY;\n      var xy = [Math.round(x), Math.round(y)];\n      var offsetxy = this.getOffsetMousePosition(e);\n\n      if (this.state.isDragging) {\n        this.setState({\n          currentDragZoom: offsetxy[0]\n        });\n      }\n\n      if (this.state.isPanning) {\n        var xy0 = this.state.initialPanPosition;\n        var timeOffset = this.props.scale.invert(xy[0]).getTime() - this.props.scale.invert(xy0[0]).getTime();\n        var newBegin = parseInt(this.state.initialPanBegin - timeOffset, 10);\n        var newEnd = parseInt(this.state.initialPanEnd - timeOffset, 10);\n        var duration = parseInt(this.state.initialPanEnd - this.state.initialPanBegin, 10);\n\n        if (this.props.minTime && newBegin < this.props.minTime.getTime()) {\n          newBegin = this.props.minTime.getTime();\n          newEnd = newBegin + duration;\n        }\n\n        if (this.props.maxTime && newEnd > this.props.maxTime.getTime()) {\n          newEnd = this.props.maxTime.getTime();\n          newBegin = newEnd - duration;\n        }\n\n        var newTimeRange = new _pondjs.TimeRange(newBegin, newEnd);\n\n        if (this.props.onZoom) {\n          this.props.onZoom(newTimeRange);\n        }\n      } else if (this.props.onMouseMove) {\n        var mousePosition = this.getOffsetMousePosition(e);\n\n        if (this.props.onMouseMove) {\n          this.props.onMouseMove(mousePosition[0], mousePosition[1]);\n        }\n      }\n    }\n  }, {\n    key: \"handleContextMenu\",\n    value: function handleContextMenu(e) {\n      var x = e.pageX;\n      var y = e.pageY;\n\n      if (this.props.onContextMenu) {\n        this.props.onContextMenu(x, y);\n      }\n    } //\n    // Render\n    //\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var cursor = this.state.isPanning ? \"-webkit-grabbing\" : \"default\";\n      var handlers = {\n        onMouseDown: this.handleMouseDown,\n        onMouseMove: this.handleMouseMove,\n        onMouseOut: this.handleMouseOut,\n        onMouseUp: this.handleMouseUp,\n        onContextMenu: this.handleContextMenu\n      };\n      return _react2.default.createElement(\"g\", _extends({\n        pointerEvents: \"all\",\n        ref: function ref(c) {\n          _this2.eventHandlerRef = c;\n        }\n      }, handlers), _react2.default.createElement(\"rect\", {\n        key: \"handler-hit-rect\",\n        ref: function ref(c) {\n          _this2.eventRect = c;\n        },\n        style: {\n          fill: \"#000\",\n          opacity: 0.0,\n          cursor: cursor\n        },\n        x: 0,\n        y: 0,\n        width: this.props.width,\n        height: this.props.height\n      }), this.props.children, this.state.isDragging && _react2.default.createElement(\"rect\", {\n        style: {\n          opacity: 0.3,\n          fill: \"grey\"\n        },\n        x: Math.min(this.state.currentDragZoom, this.state.initialDragZoom),\n        y: 0,\n        width: Math.abs(this.state.currentDragZoom - this.state.initialDragZoom),\n        height: this.props.height,\n        pointerEvents: \"none\"\n      }));\n    }\n  }]);\n\n  return EventHandler;\n}(_react2.default.Component);\n\nexports.default = EventHandler;\nEventHandler.propTypes = {\n  children: _propTypes2.default.oneOfType([_propTypes2.default.arrayOf(_propTypes2.default.node), _propTypes2.default.node]),\n  enablePanZoom: _propTypes2.default.bool,\n  enableDragZoom: _propTypes2.default.bool,\n  scale: _propTypes2.default.func.isRequired,\n  width: _propTypes2.default.number.isRequired,\n  height: _propTypes2.default.number.isRequired,\n  maxTime: _propTypes2.default.instanceOf(Date),\n  minTime: _propTypes2.default.instanceOf(Date),\n  minDuration: _propTypes2.default.number,\n  onZoom: _propTypes2.default.func,\n  onMouseMove: _propTypes2.default.func,\n  onMouseOut: _propTypes2.default.func,\n  onMouseClick: _propTypes2.default.func,\n  onContextMenu: _propTypes2.default.func\n};\nEventHandler.defaultProps = {\n  enablePanZoom: false,\n  enableDragZoom: false\n};","map":{"version":3,"sources":["/Users/nicholasraffone/Documents/swefall2021/finalproj/FinancialSentiment/fin_sentiment_front/node_modules/react-timeseries-charts/lib/components/EventHandler.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_reactDom","_reactDom2","_propTypes","_propTypes2","_pondjs","_util","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","EventHandler","_React$Component","_this","getPrototypeOf","state","isPanning","initialPanBegin","initialPanEnd","initialPanPosition","handleScrollWheel","bind","handleMouseDown","handleMouseUp","handleMouseOut","handleMouseMove","handleContextMenu","componentDidMount","eventHandlerRef","addEventListener","passive","getOffsetMousePosition","e","offset","getElementOffset","eventRect","x","pageX","left","y","pageY","top","Math","round","enablePanZoom","enableDragZoom","preventDefault","SCALE_FACTOR","scale","deltaY","xy","begin","domain","getTime","end","center","invert","beginScaled","parseInt","endScaled","duration","minDuration","minTime","maxTime","maxDuration","newBegin","Date","newEnd","newTimeRange","TimeRange","onZoom","button","document","offsetxy","setState","isDragging","initialDragZoom","currentDragZoom","xy0","onMouseClick","stopPropagation","removeEventListener","abs","start","sort","onMouseOut","timeOffset","onMouseMove","mousePosition","onContextMenu","render","_this2","cursor","handlers","onMouseDown","onMouseUp","createElement","pointerEvents","ref","c","style","fill","opacity","width","height","children","min","Component","propTypes","oneOfType","arrayOf","node","bool","func","isRequired","number","instanceOf","defaultProps"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _util = require(\"../js/util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  Copyright (c) 2015-present, The Regents of the University of California,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  through Lawrence Berkeley National Laboratory (subject to receipt\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  of any required approvals from the U.S. Dept. of Energy).\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  LICENSE file in the root directory of this source tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n// eslint-disable-line\n\n\n/**\n * Internal component which provides the top level event catcher for the charts.\n * This is a higher order component. It wraps a tree of SVG elements below it,\n * passed in as this.props.children, and catches events that they do not handle.\n *\n * The EventHandler is responsible for pan and zoom events as well as other click\n * and hover actions.\n */\nvar EventHandler = function (_React$Component) {\n    _inherits(EventHandler, _React$Component);\n\n    function EventHandler(props) {\n        _classCallCheck(this, EventHandler);\n\n        var _this = _possibleConstructorReturn(this, (EventHandler.__proto__ || Object.getPrototypeOf(EventHandler)).call(this, props));\n\n        _this.state = {\n            isPanning: false,\n            initialPanBegin: null,\n            initialPanEnd: null,\n            initialPanPosition: null\n        };\n\n        _this.handleScrollWheel = _this.handleScrollWheel.bind(_this);\n        _this.handleMouseDown = _this.handleMouseDown.bind(_this);\n        _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n        _this.handleMouseOut = _this.handleMouseOut.bind(_this);\n        _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n        _this.handleContextMenu = _this.handleContextMenu.bind(_this);\n        return _this;\n    }\n\n    _createClass(EventHandler, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            this.eventHandlerRef.addEventListener(\"wheel\", this.handleScrollWheel, { passive: false });\n        }\n\n        // get the event mouse position relative to the event rect\n\n    }, {\n        key: \"getOffsetMousePosition\",\n        value: function getOffsetMousePosition(e) {\n            var offset = (0, _util.getElementOffset)(this.eventRect);\n            var x = e.pageX - offset.left;\n            var y = e.pageY - offset.top;\n            return [Math.round(x), Math.round(y)];\n        }\n\n        //\n        // Event handlers\n        //\n\n    }, {\n        key: \"handleScrollWheel\",\n        value: function handleScrollWheel(e) {\n            if (!this.props.enablePanZoom && !this.props.enableDragZoom) {\n                return;\n            }\n\n            e.preventDefault();\n\n            var SCALE_FACTOR = 0.001;\n            var scale = 1 + e.deltaY * SCALE_FACTOR;\n            if (scale > 3) {\n                scale = 3;\n            }\n            if (scale < 0.1) {\n                scale = 0.1;\n            }\n\n            var xy = this.getOffsetMousePosition(e);\n\n            var begin = this.props.scale.domain()[0].getTime();\n            var end = this.props.scale.domain()[1].getTime();\n            var center = this.props.scale.invert(xy[0]).getTime();\n\n            var beginScaled = center - parseInt((center - begin) * scale, 10);\n            var endScaled = center + parseInt((end - center) * scale, 10);\n\n            // Duration constraint\n            var duration = (end - begin) * scale;\n\n            if (this.props.minDuration) {\n                var minDuration = parseInt(this.props.minDuration, 10);\n                if (duration < this.props.minDuration) {\n                    beginScaled = center - (center - begin) / (end - begin) * minDuration;\n                    endScaled = center + (end - center) / (end - begin) * minDuration;\n                }\n            }\n\n            if (this.props.minTime && this.props.maxTime) {\n                var maxDuration = this.props.maxTime.getTime() - this.props.minTime.getTime();\n                if (duration > maxDuration) {\n                    duration = maxDuration;\n                }\n            }\n\n            // Range constraint\n            if (this.props.minTime && beginScaled < this.props.minTime.getTime()) {\n                beginScaled = this.props.minTime.getTime();\n                endScaled = beginScaled + duration;\n            }\n\n            if (this.props.maxTime && endScaled > this.props.maxTime.getTime()) {\n                endScaled = this.props.maxTime.getTime();\n                beginScaled = endScaled - duration;\n            }\n\n            var newBegin = new Date(beginScaled);\n            var newEnd = new Date(endScaled);\n\n            var newTimeRange = new _pondjs.TimeRange(newBegin, newEnd);\n\n            if (this.props.onZoom) {\n                this.props.onZoom(newTimeRange);\n            }\n        }\n    }, {\n        key: \"handleMouseDown\",\n        value: function handleMouseDown(e) {\n            if (!this.props.enablePanZoom && !this.props.enableDragZoom) {\n                return;\n            }\n\n            if (e.button === 2) {\n                return;\n            }\n\n            e.preventDefault();\n\n            document.addEventListener(\"mouseover\", this.handleMouseMove);\n            document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n            if (this.props.enableDragZoom) {\n                var offsetxy = this.getOffsetMousePosition(e);\n                this.setState({\n                    isDragging: true,\n                    initialDragZoom: offsetxy[0],\n                    currentDragZoom: offsetxy[0]\n                });\n            }\n\n            if (this.props.enablePanZoom) {\n                var x = e.pageX;\n                var y = e.pageY;\n                var xy0 = [Math.round(x), Math.round(y)];\n\n                var begin = this.props.scale.domain()[0].getTime();\n                var end = this.props.scale.domain()[1].getTime();\n\n                this.setState({\n                    isPanning: true,\n                    initialPanBegin: begin,\n                    initialPanEnd: end,\n                    initialPanPosition: xy0\n                });\n            }\n\n            return false;\n        }\n    }, {\n        key: \"handleMouseUp\",\n        value: function handleMouseUp(e) {\n            if (!this.props.onMouseClick && !this.props.enablePanZoom && !this.props.enableDragZoom) {\n                return;\n            }\n\n            e.stopPropagation();\n\n            document.removeEventListener(\"mouseover\", this.handleMouseMove);\n            document.removeEventListener(\"mouseup\", this.handleMouseUp);\n\n            var offsetxy = this.getOffsetMousePosition(e);\n\n            var x = e.pageX;\n            var isPanning = this.state.initialPanPosition && Math.abs(x - this.state.initialPanPosition[0]) > 2;\n            var isDragging = this.state.initialDragZoom && Math.abs(offsetxy[0] - this.state.initialDragZoom) > 2;\n\n            if (this.props.onMouseClick && !isPanning && !isDragging) {\n                this.props.onMouseClick(offsetxy[0], offsetxy[1]);\n            }\n\n            if (this.props.enableDragZoom) {\n                if (isDragging) {\n                    var start = this.props.scale.invert(this.state.initialDragZoom).getTime();\n                    var end = this.props.scale.invert(this.state.currentDragZoom).getTime();\n\n                    var newBegin = parseInt(start, 10);\n                    var newEnd = parseInt(end, 10);\n\n                    if (this.props.minTime && newBegin < this.props.minTime.getTime()) {\n                        newBegin = this.props.minTime.getTime();\n                    }\n\n                    if (this.props.maxTime && newEnd > this.props.maxTime.getTime()) {\n                        newEnd = this.props.maxTime.getTime();\n                    }\n\n                    var newTimeRange = new _pondjs.TimeRange([newBegin, newEnd].sort());\n                    if (this.props.onZoom) {\n                        this.props.onZoom(newTimeRange);\n                    }\n                }\n\n                this.setState({\n                    isDragging: false,\n                    initialDragZoom: null,\n                    initialPanEnd: null,\n                    currentDragZoom: null\n                });\n            }\n\n            if (this.props.enablePanZoom) {\n                this.setState({\n                    isPanning: false,\n                    initialPanBegin: null,\n                    initialPanEnd: null,\n                    initialPanPosition: null\n                });\n            }\n        }\n    }, {\n        key: \"handleMouseOut\",\n        value: function handleMouseOut(e) {\n            e.preventDefault();\n\n            if (this.props.onMouseOut) {\n                this.props.onMouseOut();\n            }\n        }\n    }, {\n        key: \"handleMouseMove\",\n        value: function handleMouseMove(e) {\n            e.preventDefault();\n            var x = e.pageX;\n            var y = e.pageY;\n            var xy = [Math.round(x), Math.round(y)];\n            var offsetxy = this.getOffsetMousePosition(e);\n            if (this.state.isDragging) {\n                this.setState({\n                    currentDragZoom: offsetxy[0]\n                });\n            }\n            if (this.state.isPanning) {\n                var xy0 = this.state.initialPanPosition;\n                var timeOffset = this.props.scale.invert(xy[0]).getTime() - this.props.scale.invert(xy0[0]).getTime();\n\n                var newBegin = parseInt(this.state.initialPanBegin - timeOffset, 10);\n                var newEnd = parseInt(this.state.initialPanEnd - timeOffset, 10);\n                var duration = parseInt(this.state.initialPanEnd - this.state.initialPanBegin, 10);\n\n                if (this.props.minTime && newBegin < this.props.minTime.getTime()) {\n                    newBegin = this.props.minTime.getTime();\n                    newEnd = newBegin + duration;\n                }\n\n                if (this.props.maxTime && newEnd > this.props.maxTime.getTime()) {\n                    newEnd = this.props.maxTime.getTime();\n                    newBegin = newEnd - duration;\n                }\n\n                var newTimeRange = new _pondjs.TimeRange(newBegin, newEnd);\n                if (this.props.onZoom) {\n                    this.props.onZoom(newTimeRange);\n                }\n            } else if (this.props.onMouseMove) {\n                var mousePosition = this.getOffsetMousePosition(e);\n                if (this.props.onMouseMove) {\n                    this.props.onMouseMove(mousePosition[0], mousePosition[1]);\n                }\n            }\n        }\n    }, {\n        key: \"handleContextMenu\",\n        value: function handleContextMenu(e) {\n            var x = e.pageX;\n            var y = e.pageY;\n            if (this.props.onContextMenu) {\n                this.props.onContextMenu(x, y);\n            }\n        }\n\n        //\n        // Render\n        //\n\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            var cursor = this.state.isPanning ? \"-webkit-grabbing\" : \"default\";\n            var handlers = {\n                onMouseDown: this.handleMouseDown,\n                onMouseMove: this.handleMouseMove,\n                onMouseOut: this.handleMouseOut,\n                onMouseUp: this.handleMouseUp,\n                onContextMenu: this.handleContextMenu\n            };\n            return _react2.default.createElement(\n                \"g\",\n                _extends({\n                    pointerEvents: \"all\",\n                    ref: function ref(c) {\n                        _this2.eventHandlerRef = c;\n                    }\n                }, handlers),\n                _react2.default.createElement(\"rect\", {\n                    key: \"handler-hit-rect\",\n                    ref: function ref(c) {\n                        _this2.eventRect = c;\n                    },\n                    style: { fill: \"#000\", opacity: 0.0, cursor: cursor },\n                    x: 0,\n                    y: 0,\n                    width: this.props.width,\n                    height: this.props.height\n                }),\n                this.props.children,\n                this.state.isDragging && _react2.default.createElement(\"rect\", {\n                    style: { opacity: 0.3, fill: \"grey\" },\n                    x: Math.min(this.state.currentDragZoom, this.state.initialDragZoom),\n                    y: 0,\n                    width: Math.abs(this.state.currentDragZoom - this.state.initialDragZoom),\n                    height: this.props.height,\n                    pointerEvents: \"none\"\n                })\n            );\n        }\n    }]);\n\n    return EventHandler;\n}(_react2.default.Component);\n\nexports.default = EventHandler;\n\n\nEventHandler.propTypes = {\n    children: _propTypes2.default.oneOfType([_propTypes2.default.arrayOf(_propTypes2.default.node), _propTypes2.default.node]),\n    enablePanZoom: _propTypes2.default.bool,\n    enableDragZoom: _propTypes2.default.bool,\n    scale: _propTypes2.default.func.isRequired,\n    width: _propTypes2.default.number.isRequired,\n    height: _propTypes2.default.number.isRequired,\n    maxTime: _propTypes2.default.instanceOf(Date),\n    minTime: _propTypes2.default.instanceOf(Date),\n    minDuration: _propTypes2.default.number,\n    onZoom: _propTypes2.default.func,\n    onMouseMove: _propTypes2.default.func,\n    onMouseOut: _propTypes2.default.func,\n    onMouseClick: _propTypes2.default.func,\n    onContextMenu: _propTypes2.default.func\n};\n\nEventHandler.defaultProps = {\n    enablePanZoom: false,\n    enableDragZoom: false\n};"]},"metadata":{},"sourceType":"script"}