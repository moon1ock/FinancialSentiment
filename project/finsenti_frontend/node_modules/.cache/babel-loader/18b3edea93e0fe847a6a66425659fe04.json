{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _underscore = require(\"underscore\");\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _d3Shape = require(\"d3-shape\");\n\nvar _merge = require(\"merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _styler = require(\"../js/styler\");\n\nvar _util = require(\"../js/util\");\n\nvar _curve = require(\"../js/curve\");\n\nvar _curve2 = _interopRequireDefault(_curve);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n *  Copyright (c) 2015-present, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n\nvar defaultStyle = {\n  normal: {\n    stroke: \"steelblue\",\n    fill: \"none\",\n    strokeWidth: 1\n  },\n  highlighted: {\n    stroke: \"#5a98cb\",\n    fill: \"none\",\n    strokeWidth: 1\n  },\n  selected: {\n    stroke: \"steelblue\",\n    fill: \"none\",\n    strokeWidth: 2\n  },\n  muted: {\n    stroke: \"steelblue\",\n    fill: \"none\",\n    opacity: 0.4,\n    strokeWidth: 1\n  }\n};\n/**\n * The `<LineChart>` component is able to display multiple columns of a TimeSeries\n * as separate line charts.\n *\n * The `<LineChart>` should be used within `<ChartContainer>` etc., as this will\n * construct the horizontal and vertical axis, and manage other elements.\n *\n * Here is an example of two columns of a TimeSeries being plotted with the `<LineChart>`:\n *\n * ```\n  <ChartContainer timeRange={this.state.timerange} >\n    <ChartRow height=\"200\">\n      <YAxis id=\"y\" label=\"Price ($)\" min={0.5} max={1.5} format=\"$,.2f\" />\n      <Charts>\n        <LineChart\n          axis=\"y\"\n          breakLine={false}\n          series={currencySeries}\n          columns={[\"aud\", \"euro\"]}\n          style={style}\n          interpolation=\"curveBasis\" />\n      </Charts>\n    </ChartRow>\n  </ChartContainer>\n * ```\n */\n\nvar LineChart = function (_React$Component) {\n  _inherits(LineChart, _React$Component);\n\n  function LineChart() {\n    _classCallCheck(this, LineChart);\n\n    return _possibleConstructorReturn(this, (LineChart.__proto__ || Object.getPrototypeOf(LineChart)).apply(this, arguments));\n  }\n\n  _createClass(LineChart, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var newSeries = nextProps.series;\n      var oldSeries = this.props.series;\n      var width = nextProps.width;\n      var timeScale = nextProps.timeScale;\n      var yScale = nextProps.yScale;\n      var interpolation = nextProps.interpolation;\n      var highlight = nextProps.highlight;\n      var selection = nextProps.selection;\n      var columns = nextProps.columns; // What changed?\n\n      var widthChanged = this.props.width !== width;\n      var timeScaleChanged = (0, _util.scaleAsString)(this.props.timeScale) !== (0, _util.scaleAsString)(timeScale);\n      var yAxisScaleChanged = this.props.yScale !== yScale;\n      var interpolationChanged = this.props.interpolation !== interpolation;\n      var highlightChanged = this.props.highlight !== highlight;\n      var selectionChanged = this.props.selection !== selection;\n      var columnsChanged = this.props.columns !== columns;\n      var seriesChanged = false;\n\n      if (oldSeries.size() !== newSeries.size()) {\n        seriesChanged = true;\n      } else {\n        seriesChanged = !_pondjs.TimeSeries.is(oldSeries, newSeries);\n      }\n\n      return widthChanged || seriesChanged || timeScaleChanged || yAxisScaleChanged || interpolationChanged || highlightChanged || selectionChanged || columnsChanged;\n    }\n  }, {\n    key: \"handleHover\",\n    value: function handleHover(e, column) {\n      if (this.props.onHighlightChange) {\n        this.props.onHighlightChange(column);\n      }\n    }\n  }, {\n    key: \"handleHoverLeave\",\n    value: function handleHoverLeave() {\n      if (this.props.onHighlightChange) {\n        this.props.onHighlightChange(null);\n      }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, column) {\n      e.stopPropagation();\n\n      if (this.props.onSelectionChange) {\n        this.props.onSelectionChange(column);\n      }\n    }\n  }, {\n    key: \"providedPathStyleMap\",\n    value: function providedPathStyleMap(column) {\n      var style = {};\n\n      if (this.props.style) {\n        if (this.props.style instanceof _styler.Styler) {\n          style = this.props.style.lineChartStyle()[column];\n        } else if (_underscore2.default.isFunction(this.props.style)) {\n          style = this.props.style(column);\n        } else if (_underscore2.default.isObject(this.props.style)) {\n          style = this.props.style ? this.props.style[column] : defaultStyle;\n        }\n      }\n\n      return style;\n    }\n    /**\n     * Returns the style used for drawing the path\n     */\n\n  }, {\n    key: \"pathStyle\",\n    value: function pathStyle(column) {\n      var style = void 0;\n      var styleMap = this.providedPathStyleMap(column);\n      var isHighlighted = this.props.highlight && column === this.props.highlight;\n      var isSelected = this.props.selection && column === this.props.selection;\n\n      if (this.props.selection) {\n        if (isSelected) {\n          style = (0, _merge2.default)(true, defaultStyle.selected, styleMap.selected ? styleMap.selected : {});\n        } else if (isHighlighted) {\n          style = (0, _merge2.default)(true, defaultStyle.highlighted, styleMap.highlighted ? styleMap.highlighted : {});\n        } else {\n          style = (0, _merge2.default)(true, defaultStyle.muted, styleMap.muted ? styleMap.muted : {});\n        }\n      } else if (isHighlighted) {\n        style = (0, _merge2.default)(true, defaultStyle.highlighted, styleMap.highlighted ? styleMap.highlighted : {});\n      } else {\n        style = (0, _merge2.default)(true, defaultStyle.normal, styleMap.normal);\n      }\n\n      style.pointerEvents = \"none\";\n      return style;\n    }\n  }, {\n    key: \"renderPath\",\n    value: function renderPath(data, column, key) {\n      var _this2 = this;\n\n      var hitStyle = {\n        stroke: \"white\",\n        fill: \"none\",\n        opacity: 0.0,\n        strokeWidth: 7,\n        cursor: \"crosshair\",\n        pointerEvents: \"stroke\"\n      }; // D3 generates each path\n\n      var path = (0, _d3Shape.line)().curve(_curve2.default[this.props.interpolation]).x(function (d) {\n        return _this2.props.timeScale(d.x);\n      }).y(function (d) {\n        return _this2.props.yScale(d.y);\n      })(data);\n      return _react2.default.createElement(\"g\", {\n        key: key\n      }, _react2.default.createElement(\"path\", {\n        d: path,\n        style: this.pathStyle(column)\n      }), _react2.default.createElement(\"path\", {\n        d: path,\n        style: hitStyle,\n        onClick: function onClick(e) {\n          return _this2.handleClick(e, column);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return _this2.handleHoverLeave();\n        },\n        onMouseMove: function onMouseMove(e) {\n          return _this2.handleHover(e, column);\n        }\n      }));\n    }\n  }, {\n    key: \"renderLines\",\n    value: function renderLines() {\n      var _this3 = this;\n\n      return _underscore2.default.map(this.props.columns, function (column) {\n        return _this3.renderLine(column);\n      });\n    }\n  }, {\n    key: \"renderLine\",\n    value: function renderLine(column) {\n      var pathLines = [];\n      var count = 1;\n\n      if (this.props.breakLine) {\n        // Remove nulls and NaNs from the line by generating a break in the line\n        var currentPoints = null;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.props.series.events()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var d = _step.value;\n            var timestamp = new Date(d.begin().getTime() + (d.end().getTime() - d.begin().getTime()) / 2);\n            var value = d.get(column);\n            var badPoint = _underscore2.default.isNull(value) || _underscore2.default.isNaN(value) || !_underscore2.default.isFinite(value);\n\n            if (!badPoint) {\n              if (!currentPoints) currentPoints = [];\n              currentPoints.push({\n                x: timestamp,\n                y: value\n              });\n            } else if (currentPoints) {\n              if (currentPoints.length > 1) {\n                pathLines.push(this.renderPath(currentPoints, column, count));\n                count += 1;\n              }\n\n              currentPoints = null;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (currentPoints && currentPoints.length > 1) {\n          pathLines.push(this.renderPath(currentPoints, column, count));\n          count += 1;\n        }\n      } else {\n        // Ignore nulls and NaNs in the line\n        var cleanedPoints = [];\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this.props.series.events()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _d = _step2.value;\n\n            var _timestamp = new Date(_d.begin().getTime() + (_d.end().getTime() - _d.begin().getTime()) / 2);\n\n            var _value = _d.get(column);\n\n            var _badPoint = _underscore2.default.isNull(_value) || _underscore2.default.isNaN(_value) || !_underscore2.default.isFinite(_value);\n\n            if (!_badPoint) {\n              cleanedPoints.push({\n                x: _timestamp,\n                y: _value\n              });\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        pathLines.push(this.renderPath(cleanedPoints, column, count));\n        count += 1;\n      }\n\n      return _react2.default.createElement(\"g\", {\n        key: column\n      }, pathLines);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\"g\", null, this.renderLines());\n    }\n  }]);\n\n  return LineChart;\n}(_react2.default.Component);\n\nexports.default = LineChart;\nLineChart.propTypes = {\n  /**\n   * Show or hide this chart\n   */\n  visible: _propTypes2.default.bool,\n\n  /**\n   * What [Pond TimeSeries](https://esnet-pondjs.appspot.com/#/timeseries) data to visualize\n   */\n  series: _propTypes2.default.instanceOf(_pondjs.TimeSeries).isRequired,\n\n  /**\n   * Reference to the axis which provides the vertical scale for drawing.\n   * e.g. specifying `axis=\"trafficRate\"` would refer the y-scale of the YAxis\n   * with id=\"trafficRate\".\n   */\n  axis: _propTypes2.default.string.isRequired,\n  // eslint-disable-line\n\n  /**\n   * Which columns from the series to draw.\n   * \n   * NOTE : Columns can't have periods because periods \n   * represent a path to deep data in the underlying events \n   * (i.e. reference into nested data structures)\n   */\n  columns: _propTypes2.default.arrayOf(_propTypes2.default.string),\n\n  /**\n   * The styles to apply to the underlying SVG lines. This is a mapping\n   * of column names to objects with style attributes, in the following\n   * format:\n   *\n   * ```\n   * const style = {\n   *     in: {\n   *         normal: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 1},\n   *         highlighted: {stroke: \"#5a98cb\", fill: \"none\", strokeWidth: 1},\n   *         selected: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 1},\n   *         muted: {stroke: \"steelblue\", fill: \"none\", opacity: 0.4, strokeWidth: 1}\n   *     },\n   *     out: {\n   *         ...\n   *     }\n   * };\n   *\n   *  <LineChart style={style} ... />\n   * ```\n   *\n   * Alternatively, you can pass in a `Styler`. For example:\n   *\n   * ```\n   * const currencyStyle = Styler([\n   *     {key: \"aud\", color: \"steelblue\", width: 1, dashed: true},\n   *     {key: \"euro\", color: \"#F68B24\", width: 2}\n   * ]);\n   *\n   * <LineChart columns={[\"aud\", \"euro\"]} style={currencyStyle} ... />\n   *\n   * ```\n   */\n  style: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.func, _propTypes2.default.instanceOf(_styler.Styler)]),\n\n  /**\n   * Any of D3's interpolation modes.\n   */\n  interpolation: _propTypes2.default.oneOf([\"curveBasis\", \"curveBasisOpen\", \"curveBundle\", \"curveCardinal\", \"curveCardinalOpen\", \"curveCatmullRom\", \"curveCatmullRomOpen\", \"curveLinear\", \"curveMonotoneX\", \"curveMonotoneY\", \"curveNatural\", \"curveRadial\", \"curveStep\", \"curveStepAfter\", \"curveStepBefore\"]),\n\n  /**\n   * The determines how to handle bad/missing values in the supplied\n   * TimeSeries. A missing value can be null or NaN. If breakLine\n   * is set to true (the default) then the line will be broken on either\n   * side of the bad value(s). If breakLine is false bad values\n   * are simply removed and the adjoining points are connected.\n   */\n  breakLine: _propTypes2.default.bool,\n\n  /**\n   * The selected item, which will be rendered in the \"selected\" style.\n   * If a line is selected, all other lines will be rendered in the \"muted\" style.\n   *\n   * See also `onSelectionChange`\n   */\n  selection: _propTypes2.default.string,\n\n  /**\n   * A callback that will be called when the selection changes. It will be called\n   * with the column corresponding to the line being clicked.\n   */\n  onSelectionChange: _propTypes2.default.func,\n\n  /**\n   * The highlighted column, which will be rendered in the \"highlighted\" style.\n   *\n   * See also `onHighlightChange`\n   */\n  highlight: _propTypes2.default.string,\n\n  /**\n   * A callback that will be called when the hovered over line changes.\n   * It will be called with the corresponding column.\n   */\n  onHighlightChange: _propTypes2.default.func,\n\n  /**\n   * [Internal] The timeScale supplied by the surrounding ChartContainer\n   */\n  timeScale: _propTypes2.default.func,\n\n  /**\n   * [Internal] The yScale supplied by the associated YAxis\n   */\n  yScale: _propTypes2.default.func,\n\n  /**\n   * [Internal] The width supplied by the surrounding ChartContainer\n   */\n  width: _propTypes2.default.number\n};\nLineChart.defaultProps = {\n  visible: true,\n  columns: [\"value\"],\n  smooth: true,\n  interpolation: \"curveLinear\",\n  breakLine: true\n};","map":{"version":3,"sources":["/Users/nicholasraffone/Documents/swefall2021/finalproj/FinancialSentiment/fin_sentiment_front/node_modules/react-timeseries-charts/lib/components/LineChart.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_underscore","require","_underscore2","_interopRequireDefault","_d3Shape","_merge","_merge2","_react","_react2","_propTypes","_propTypes2","_pondjs","_styler","_util","_curve","_curve2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","defaultStyle","normal","stroke","fill","strokeWidth","highlighted","selected","muted","opacity","LineChart","_React$Component","getPrototypeOf","apply","arguments","shouldComponentUpdate","nextProps","newSeries","series","oldSeries","width","timeScale","yScale","interpolation","highlight","selection","columns","widthChanged","timeScaleChanged","scaleAsString","yAxisScaleChanged","interpolationChanged","highlightChanged","selectionChanged","columnsChanged","seriesChanged","size","TimeSeries","is","handleHover","e","column","onHighlightChange","handleHoverLeave","handleClick","stopPropagation","onSelectionChange","providedPathStyleMap","style","Styler","lineChartStyle","isFunction","isObject","pathStyle","styleMap","isHighlighted","isSelected","pointerEvents","renderPath","data","_this2","hitStyle","cursor","path","line","curve","x","d","y","createElement","onClick","onMouseLeave","onMouseMove","renderLines","_this3","map","renderLine","pathLines","count","breakLine","currentPoints","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","events","Symbol","iterator","_step","next","done","timestamp","Date","begin","getTime","end","get","badPoint","isNull","isNaN","isFinite","push","err","return","cleanedPoints","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_d","_timestamp","_value","_badPoint","render","Component","propTypes","visible","bool","instanceOf","isRequired","axis","string","arrayOf","oneOfType","object","func","oneOf","number","defaultProps","smooth"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,EAAAA,KAAK,EAAE;AADkC,CAA7C;;AAIA,IAAIC,YAAY,GAAG,YAAY;AAAE,WAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAE,UAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AAA2BE,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4Bb,MAAAA,MAAM,CAACC,cAAP,CAAsBK,MAAtB,EAA8BI,UAAU,CAACI,GAAzC,EAA8CJ,UAA9C;AAA4D;AAAE;;AAAC,SAAO,UAAUK,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,QAAID,UAAJ,EAAgBX,gBAAgB,CAACU,WAAW,CAACG,SAAb,EAAwBF,UAAxB,CAAhB;AAAqD,QAAIC,WAAJ,EAAiBZ,gBAAgB,CAACU,WAAD,EAAcE,WAAd,CAAhB;AAA4C,WAAOF,WAAP;AAAqB,GAAhN;AAAmN,CAA9hB,EAAnB;;AAEA,IAAII,WAAW,GAAGC,OAAO,CAAC,YAAD,CAAzB;;AAEA,IAAIC,YAAY,GAAGC,sBAAsB,CAACH,WAAD,CAAzC;;AAEA,IAAII,QAAQ,GAAGH,OAAO,CAAC,UAAD,CAAtB;;AAEA,IAAII,MAAM,GAAGJ,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIK,OAAO,GAAGH,sBAAsB,CAACE,MAAD,CAApC;;AAEA,IAAIE,MAAM,GAAGN,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIO,OAAO,GAAGL,sBAAsB,CAACI,MAAD,CAApC;;AAEA,IAAIE,UAAU,GAAGR,OAAO,CAAC,YAAD,CAAxB;;AAEA,IAAIS,WAAW,GAAGP,sBAAsB,CAACM,UAAD,CAAxC;;AAEA,IAAIE,OAAO,GAAGV,OAAO,CAAC,QAAD,CAArB;;AAEA,IAAIW,OAAO,GAAGX,OAAO,CAAC,cAAD,CAArB;;AAEA,IAAIY,KAAK,GAAGZ,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIa,MAAM,GAAGb,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAIc,OAAO,GAAGZ,sBAAsB,CAACW,MAAD,CAApC;;AAEA,SAASX,sBAAT,CAAgCa,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,SAASG,eAAT,CAAyBC,QAAzB,EAAmCxB,WAAnC,EAAgD;AAAE,MAAI,EAAEwB,QAAQ,YAAYxB,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIyB,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0CC,IAA1C,EAAgD;AAAE,MAAI,CAACD,IAAL,EAAW;AAAE,UAAM,IAAIE,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOD,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0ED,IAAjF;AAAwF;;AAEhP,SAASG,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIP,SAAJ,CAAc,6DAA6D,OAAOO,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAAC5B,SAAT,GAAqBlB,MAAM,CAACgD,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC7B,SAAvC,EAAkD;AAAE+B,IAAAA,WAAW,EAAE;AAAE9C,MAAAA,KAAK,EAAE2C,QAAT;AAAmBnC,MAAAA,UAAU,EAAE,KAA/B;AAAsCE,MAAAA,QAAQ,EAAE,IAAhD;AAAsDD,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAImC,UAAJ,EAAgB/C,MAAM,CAACkD,cAAP,GAAwBlD,MAAM,CAACkD,cAAP,CAAsBJ,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACK,SAAT,GAAqBJ,UAA3F;AAAwG;AAAC;AAC/e;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIK,YAAY,GAAG;AACfC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,MAAM,EAAE,WAAV;AAAuBC,IAAAA,IAAI,EAAE,MAA7B;AAAqCC,IAAAA,WAAW,EAAE;AAAlD,GADO;AAEfC,EAAAA,WAAW,EAAE;AAAEH,IAAAA,MAAM,EAAE,SAAV;AAAqBC,IAAAA,IAAI,EAAE,MAA3B;AAAmCC,IAAAA,WAAW,EAAE;AAAhD,GAFE;AAGfE,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,MAAM,EAAE,WAAV;AAAuBC,IAAAA,IAAI,EAAE,MAA7B;AAAqCC,IAAAA,WAAW,EAAE;AAAlD,GAHK;AAIfG,EAAAA,KAAK,EAAE;AAAEL,IAAAA,MAAM,EAAE,WAAV;AAAuBC,IAAAA,IAAI,EAAE,MAA7B;AAAqCK,IAAAA,OAAO,EAAE,GAA9C;AAAmDJ,IAAAA,WAAW,EAAE;AAAhE;AAJQ,CAAnB;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIK,SAAS,GAAG,UAAUC,gBAAV,EAA4B;AACxCjB,EAAAA,SAAS,CAACgB,SAAD,EAAYC,gBAAZ,CAAT;;AAEA,WAASD,SAAT,GAAqB;AACjBvB,IAAAA,eAAe,CAAC,IAAD,EAAOuB,SAAP,CAAf;;AAEA,WAAOpB,0BAA0B,CAAC,IAAD,EAAO,CAACoB,SAAS,CAACV,SAAV,IAAuBnD,MAAM,CAAC+D,cAAP,CAAsBF,SAAtB,CAAxB,EAA0DG,KAA1D,CAAgE,IAAhE,EAAsEC,SAAtE,CAAP,CAAjC;AACH;;AAED7D,EAAAA,YAAY,CAACyD,SAAD,EAAY,CAAC;AACrB/C,IAAAA,GAAG,EAAE,uBADgB;AAErBX,IAAAA,KAAK,EAAE,SAAS+D,qBAAT,CAA+BC,SAA/B,EAA0C;AAC7C,UAAIC,SAAS,GAAGD,SAAS,CAACE,MAA1B;AACA,UAAIC,SAAS,GAAG,KAAK/D,KAAL,CAAW8D,MAA3B;AAEA,UAAIE,KAAK,GAAGJ,SAAS,CAACI,KAAtB;AACA,UAAIC,SAAS,GAAGL,SAAS,CAACK,SAA1B;AACA,UAAIC,MAAM,GAAGN,SAAS,CAACM,MAAvB;AACA,UAAIC,aAAa,GAAGP,SAAS,CAACO,aAA9B;AACA,UAAIC,SAAS,GAAGR,SAAS,CAACQ,SAA1B;AACA,UAAIC,SAAS,GAAGT,SAAS,CAACS,SAA1B;AACA,UAAIC,OAAO,GAAGV,SAAS,CAACU,OAAxB,CAV6C,CAY7C;;AACA,UAAIC,YAAY,GAAG,KAAKvE,KAAL,CAAWgE,KAAX,KAAqBA,KAAxC;AACA,UAAIQ,gBAAgB,GAAG,CAAC,GAAG/C,KAAK,CAACgD,aAAV,EAAyB,KAAKzE,KAAL,CAAWiE,SAApC,MAAmD,CAAC,GAAGxC,KAAK,CAACgD,aAAV,EAAyBR,SAAzB,CAA1E;AACA,UAAIS,iBAAiB,GAAG,KAAK1E,KAAL,CAAWkE,MAAX,KAAsBA,MAA9C;AACA,UAAIS,oBAAoB,GAAG,KAAK3E,KAAL,CAAWmE,aAAX,KAA6BA,aAAxD;AACA,UAAIS,gBAAgB,GAAG,KAAK5E,KAAL,CAAWoE,SAAX,KAAyBA,SAAhD;AACA,UAAIS,gBAAgB,GAAG,KAAK7E,KAAL,CAAWqE,SAAX,KAAyBA,SAAhD;AACA,UAAIS,cAAc,GAAG,KAAK9E,KAAL,CAAWsE,OAAX,KAAuBA,OAA5C;AAEA,UAAIS,aAAa,GAAG,KAApB;;AACA,UAAIhB,SAAS,CAACiB,IAAV,OAAqBnB,SAAS,CAACmB,IAAV,EAAzB,EAA2C;AACvCD,QAAAA,aAAa,GAAG,IAAhB;AACH,OAFD,MAEO;AACHA,QAAAA,aAAa,GAAG,CAACxD,OAAO,CAAC0D,UAAR,CAAmBC,EAAnB,CAAsBnB,SAAtB,EAAiCF,SAAjC,CAAjB;AACH;;AAED,aAAOU,YAAY,IAAIQ,aAAhB,IAAiCP,gBAAjC,IAAqDE,iBAArD,IAA0EC,oBAA1E,IAAkGC,gBAAlG,IAAsHC,gBAAtH,IAA0IC,cAAjJ;AACH;AA/BoB,GAAD,EAgCrB;AACCvE,IAAAA,GAAG,EAAE,aADN;AAECX,IAAAA,KAAK,EAAE,SAASuF,WAAT,CAAqBC,CAArB,EAAwBC,MAAxB,EAAgC;AACnC,UAAI,KAAKrF,KAAL,CAAWsF,iBAAf,EAAkC;AAC9B,aAAKtF,KAAL,CAAWsF,iBAAX,CAA6BD,MAA7B;AACH;AACJ;AANF,GAhCqB,EAuCrB;AACC9E,IAAAA,GAAG,EAAE,kBADN;AAECX,IAAAA,KAAK,EAAE,SAAS2F,gBAAT,GAA4B;AAC/B,UAAI,KAAKvF,KAAL,CAAWsF,iBAAf,EAAkC;AAC9B,aAAKtF,KAAL,CAAWsF,iBAAX,CAA6B,IAA7B;AACH;AACJ;AANF,GAvCqB,EA8CrB;AACC/E,IAAAA,GAAG,EAAE,aADN;AAECX,IAAAA,KAAK,EAAE,SAAS4F,WAAT,CAAqBJ,CAArB,EAAwBC,MAAxB,EAAgC;AACnCD,MAAAA,CAAC,CAACK,eAAF;;AACA,UAAI,KAAKzF,KAAL,CAAW0F,iBAAf,EAAkC;AAC9B,aAAK1F,KAAL,CAAW0F,iBAAX,CAA6BL,MAA7B;AACH;AACJ;AAPF,GA9CqB,EAsDrB;AACC9E,IAAAA,GAAG,EAAE,sBADN;AAECX,IAAAA,KAAK,EAAE,SAAS+F,oBAAT,CAA8BN,MAA9B,EAAsC;AACzC,UAAIO,KAAK,GAAG,EAAZ;;AACA,UAAI,KAAK5F,KAAL,CAAW4F,KAAf,EAAsB;AAClB,YAAI,KAAK5F,KAAL,CAAW4F,KAAX,YAA4BpE,OAAO,CAACqE,MAAxC,EAAgD;AAC5CD,UAAAA,KAAK,GAAG,KAAK5F,KAAL,CAAW4F,KAAX,CAAiBE,cAAjB,GAAkCT,MAAlC,CAAR;AACH,SAFD,MAEO,IAAIvE,YAAY,CAACgB,OAAb,CAAqBiE,UAArB,CAAgC,KAAK/F,KAAL,CAAW4F,KAA3C,CAAJ,EAAuD;AAC1DA,UAAAA,KAAK,GAAG,KAAK5F,KAAL,CAAW4F,KAAX,CAAiBP,MAAjB,CAAR;AACH,SAFM,MAEA,IAAIvE,YAAY,CAACgB,OAAb,CAAqBkE,QAArB,CAA8B,KAAKhG,KAAL,CAAW4F,KAAzC,CAAJ,EAAqD;AACxDA,UAAAA,KAAK,GAAG,KAAK5F,KAAL,CAAW4F,KAAX,GAAmB,KAAK5F,KAAL,CAAW4F,KAAX,CAAiBP,MAAjB,CAAnB,GAA8CxC,YAAtD;AACH;AACJ;;AACD,aAAO+C,KAAP;AACH;AAED;AACR;AACA;;AAlBO,GAtDqB,EA0ErB;AACCrF,IAAAA,GAAG,EAAE,WADN;AAECX,IAAAA,KAAK,EAAE,SAASqG,SAAT,CAAmBZ,MAAnB,EAA2B;AAC9B,UAAIO,KAAK,GAAG,KAAK,CAAjB;AAEA,UAAIM,QAAQ,GAAG,KAAKP,oBAAL,CAA0BN,MAA1B,CAAf;AACA,UAAIc,aAAa,GAAG,KAAKnG,KAAL,CAAWoE,SAAX,IAAwBiB,MAAM,KAAK,KAAKrF,KAAL,CAAWoE,SAAlE;AACA,UAAIgC,UAAU,GAAG,KAAKpG,KAAL,CAAWqE,SAAX,IAAwBgB,MAAM,KAAK,KAAKrF,KAAL,CAAWqE,SAA/D;;AAEA,UAAI,KAAKrE,KAAL,CAAWqE,SAAf,EAA0B;AACtB,YAAI+B,UAAJ,EAAgB;AACZR,UAAAA,KAAK,GAAG,CAAC,GAAG1E,OAAO,CAACY,OAAZ,EAAqB,IAArB,EAA2Be,YAAY,CAACM,QAAxC,EAAkD+C,QAAQ,CAAC/C,QAAT,GAAoB+C,QAAQ,CAAC/C,QAA7B,GAAwC,EAA1F,CAAR;AACH,SAFD,MAEO,IAAIgD,aAAJ,EAAmB;AACtBP,UAAAA,KAAK,GAAG,CAAC,GAAG1E,OAAO,CAACY,OAAZ,EAAqB,IAArB,EAA2Be,YAAY,CAACK,WAAxC,EAAqDgD,QAAQ,CAAChD,WAAT,GAAuBgD,QAAQ,CAAChD,WAAhC,GAA8C,EAAnG,CAAR;AACH,SAFM,MAEA;AACH0C,UAAAA,KAAK,GAAG,CAAC,GAAG1E,OAAO,CAACY,OAAZ,EAAqB,IAArB,EAA2Be,YAAY,CAACO,KAAxC,EAA+C8C,QAAQ,CAAC9C,KAAT,GAAiB8C,QAAQ,CAAC9C,KAA1B,GAAkC,EAAjF,CAAR;AACH;AACJ,OARD,MAQO,IAAI+C,aAAJ,EAAmB;AACtBP,QAAAA,KAAK,GAAG,CAAC,GAAG1E,OAAO,CAACY,OAAZ,EAAqB,IAArB,EAA2Be,YAAY,CAACK,WAAxC,EAAqDgD,QAAQ,CAAChD,WAAT,GAAuBgD,QAAQ,CAAChD,WAAhC,GAA8C,EAAnG,CAAR;AACH,OAFM,MAEA;AACH0C,QAAAA,KAAK,GAAG,CAAC,GAAG1E,OAAO,CAACY,OAAZ,EAAqB,IAArB,EAA2Be,YAAY,CAACC,MAAxC,EAAgDoD,QAAQ,CAACpD,MAAzD,CAAR;AACH;;AAED8C,MAAAA,KAAK,CAACS,aAAN,GAAsB,MAAtB;AAEA,aAAOT,KAAP;AACH;AA1BF,GA1EqB,EAqGrB;AACCrF,IAAAA,GAAG,EAAE,YADN;AAECX,IAAAA,KAAK,EAAE,SAAS0G,UAAT,CAAoBC,IAApB,EAA0BlB,MAA1B,EAAkC9E,GAAlC,EAAuC;AAC1C,UAAIiG,MAAM,GAAG,IAAb;;AAEA,UAAIC,QAAQ,GAAG;AACX1D,QAAAA,MAAM,EAAE,OADG;AAEXC,QAAAA,IAAI,EAAE,MAFK;AAGXK,QAAAA,OAAO,EAAE,GAHE;AAIXJ,QAAAA,WAAW,EAAE,CAJF;AAKXyD,QAAAA,MAAM,EAAE,WALG;AAMXL,QAAAA,aAAa,EAAE;AANJ,OAAf,CAH0C,CAY1C;;AACA,UAAIM,IAAI,GAAG,CAAC,GAAG3F,QAAQ,CAAC4F,IAAb,IAAqBC,KAArB,CAA2BlF,OAAO,CAACG,OAAR,CAAgB,KAAK9B,KAAL,CAAWmE,aAA3B,CAA3B,EAAsE2C,CAAtE,CAAwE,UAAUC,CAAV,EAAa;AAC5F,eAAOP,MAAM,CAACxG,KAAP,CAAaiE,SAAb,CAAuB8C,CAAC,CAACD,CAAzB,CAAP;AACH,OAFU,EAERE,CAFQ,CAEN,UAAUD,CAAV,EAAa;AACd,eAAOP,MAAM,CAACxG,KAAP,CAAakE,MAAb,CAAoB6C,CAAC,CAACC,CAAtB,CAAP;AACH,OAJU,EAIRT,IAJQ,CAAX;AAMA,aAAOnF,OAAO,CAACU,OAAR,CAAgBmF,aAAhB,CACH,GADG,EAEH;AAAE1G,QAAAA,GAAG,EAAEA;AAAP,OAFG,EAGHa,OAAO,CAACU,OAAR,CAAgBmF,aAAhB,CAA8B,MAA9B,EAAsC;AAAEF,QAAAA,CAAC,EAAEJ,IAAL;AAAWf,QAAAA,KAAK,EAAE,KAAKK,SAAL,CAAeZ,MAAf;AAAlB,OAAtC,CAHG,EAIHjE,OAAO,CAACU,OAAR,CAAgBmF,aAAhB,CAA8B,MAA9B,EAAsC;AAClCF,QAAAA,CAAC,EAAEJ,IAD+B;AAElCf,QAAAA,KAAK,EAAEa,QAF2B;AAGlCS,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiB9B,CAAjB,EAAoB;AACzB,iBAAOoB,MAAM,CAAChB,WAAP,CAAmBJ,CAAnB,EAAsBC,MAAtB,CAAP;AACH,SALiC;AAMlC8B,QAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AAClC,iBAAOX,MAAM,CAACjB,gBAAP,EAAP;AACH,SARiC;AASlC6B,QAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBhC,CAArB,EAAwB;AACjC,iBAAOoB,MAAM,CAACrB,WAAP,CAAmBC,CAAnB,EAAsBC,MAAtB,CAAP;AACH;AAXiC,OAAtC,CAJG,CAAP;AAkBH;AAvCF,GArGqB,EA6IrB;AACC9E,IAAAA,GAAG,EAAE,aADN;AAECX,IAAAA,KAAK,EAAE,SAASyH,WAAT,GAAuB;AAC1B,UAAIC,MAAM,GAAG,IAAb;;AAEA,aAAOxG,YAAY,CAACgB,OAAb,CAAqByF,GAArB,CAAyB,KAAKvH,KAAL,CAAWsE,OAApC,EAA6C,UAAUe,MAAV,EAAkB;AAClE,eAAOiC,MAAM,CAACE,UAAP,CAAkBnC,MAAlB,CAAP;AACH,OAFM,CAAP;AAGH;AARF,GA7IqB,EAsJrB;AACC9E,IAAAA,GAAG,EAAE,YADN;AAECX,IAAAA,KAAK,EAAE,SAAS4H,UAAT,CAAoBnC,MAApB,EAA4B;AAC/B,UAAIoC,SAAS,GAAG,EAAhB;AACA,UAAIC,KAAK,GAAG,CAAZ;;AACA,UAAI,KAAK1H,KAAL,CAAW2H,SAAf,EAA0B;AACtB;AACA,YAAIC,aAAa,GAAG,IAApB;AACA,YAAIC,yBAAyB,GAAG,IAAhC;AACA,YAAIC,iBAAiB,GAAG,KAAxB;AACA,YAAIC,cAAc,GAAGC,SAArB;;AAEA,YAAI;AACA,eAAK,IAAIC,SAAS,GAAG,KAAKjI,KAAL,CAAW8D,MAAX,CAAkBoE,MAAlB,GAA2BC,MAAM,CAACC,QAAlC,GAAhB,EAA+DC,KAApE,EAA2E,EAAER,yBAAyB,GAAG,CAACQ,KAAK,GAAGJ,SAAS,CAACK,IAAV,EAAT,EAA2BC,IAAzD,CAA3E,EAA2IV,yBAAyB,GAAG,IAAvK,EAA6K;AACzK,gBAAId,CAAC,GAAGsB,KAAK,CAACzI,KAAd;AAEA,gBAAI4I,SAAS,GAAG,IAAIC,IAAJ,CAAS1B,CAAC,CAAC2B,KAAF,GAAUC,OAAV,KAAsB,CAAC5B,CAAC,CAAC6B,GAAF,GAAQD,OAAR,KAAoB5B,CAAC,CAAC2B,KAAF,GAAUC,OAAV,EAArB,IAA4C,CAA3E,CAAhB;AACA,gBAAI/I,KAAK,GAAGmH,CAAC,CAAC8B,GAAF,CAAMxD,MAAN,CAAZ;AACA,gBAAIyD,QAAQ,GAAGhI,YAAY,CAACgB,OAAb,CAAqBiH,MAArB,CAA4BnJ,KAA5B,KAAsCkB,YAAY,CAACgB,OAAb,CAAqBkH,KAArB,CAA2BpJ,KAA3B,CAAtC,IAA2E,CAACkB,YAAY,CAACgB,OAAb,CAAqBmH,QAArB,CAA8BrJ,KAA9B,CAA3F;;AACA,gBAAI,CAACkJ,QAAL,EAAe;AACX,kBAAI,CAAClB,aAAL,EAAoBA,aAAa,GAAG,EAAhB;AACpBA,cAAAA,aAAa,CAACsB,IAAd,CAAmB;AAAEpC,gBAAAA,CAAC,EAAE0B,SAAL;AAAgBxB,gBAAAA,CAAC,EAAEpH;AAAnB,eAAnB;AACH,aAHD,MAGO,IAAIgI,aAAJ,EAAmB;AACtB,kBAAIA,aAAa,CAAC1H,MAAd,GAAuB,CAA3B,EAA8B;AAC1BuH,gBAAAA,SAAS,CAACyB,IAAV,CAAe,KAAK5C,UAAL,CAAgBsB,aAAhB,EAA+BvC,MAA/B,EAAuCqC,KAAvC,CAAf;AACAA,gBAAAA,KAAK,IAAI,CAAT;AACH;;AACDE,cAAAA,aAAa,GAAG,IAAhB;AACH;AACJ;AACJ,SAlBD,CAkBE,OAAOuB,GAAP,EAAY;AACVrB,UAAAA,iBAAiB,GAAG,IAApB;AACAC,UAAAA,cAAc,GAAGoB,GAAjB;AACH,SArBD,SAqBU;AACN,cAAI;AACA,gBAAI,CAACtB,yBAAD,IAA8BI,SAAS,CAACmB,MAA5C,EAAoD;AAChDnB,cAAAA,SAAS,CAACmB,MAAV;AACH;AACJ,WAJD,SAIU;AACN,gBAAItB,iBAAJ,EAAuB;AACnB,oBAAMC,cAAN;AACH;AACJ;AACJ;;AAED,YAAIH,aAAa,IAAIA,aAAa,CAAC1H,MAAd,GAAuB,CAA5C,EAA+C;AAC3CuH,UAAAA,SAAS,CAACyB,IAAV,CAAe,KAAK5C,UAAL,CAAgBsB,aAAhB,EAA+BvC,MAA/B,EAAuCqC,KAAvC,CAAf;AACAA,UAAAA,KAAK,IAAI,CAAT;AACH;AACJ,OA5CD,MA4CO;AACH;AACA,YAAI2B,aAAa,GAAG,EAApB;AACA,YAAIC,0BAA0B,GAAG,IAAjC;AACA,YAAIC,kBAAkB,GAAG,KAAzB;AACA,YAAIC,eAAe,GAAGxB,SAAtB;;AAEA,YAAI;AACA,eAAK,IAAIyB,UAAU,GAAG,KAAKzJ,KAAL,CAAW8D,MAAX,CAAkBoE,MAAlB,GAA2BC,MAAM,CAACC,QAAlC,GAAjB,EAAgEsB,MAArE,EAA6E,EAAEJ,0BAA0B,GAAG,CAACI,MAAM,GAAGD,UAAU,CAACnB,IAAX,EAAV,EAA6BC,IAA5D,CAA7E,EAAgJe,0BAA0B,GAAG,IAA7K,EAAmL;AAC/K,gBAAIK,EAAE,GAAGD,MAAM,CAAC9J,KAAhB;;AAEA,gBAAIgK,UAAU,GAAG,IAAInB,IAAJ,CAASkB,EAAE,CAACjB,KAAH,GAAWC,OAAX,KAAuB,CAACgB,EAAE,CAACf,GAAH,GAASD,OAAT,KAAqBgB,EAAE,CAACjB,KAAH,GAAWC,OAAX,EAAtB,IAA8C,CAA9E,CAAjB;;AACA,gBAAIkB,MAAM,GAAGF,EAAE,CAACd,GAAH,CAAOxD,MAAP,CAAb;;AACA,gBAAIyE,SAAS,GAAGhJ,YAAY,CAACgB,OAAb,CAAqBiH,MAArB,CAA4Bc,MAA5B,KAAuC/I,YAAY,CAACgB,OAAb,CAAqBkH,KAArB,CAA2Ba,MAA3B,CAAvC,IAA6E,CAAC/I,YAAY,CAACgB,OAAb,CAAqBmH,QAArB,CAA8BY,MAA9B,CAA9F;;AACA,gBAAI,CAACC,SAAL,EAAgB;AACZT,cAAAA,aAAa,CAACH,IAAd,CAAmB;AAAEpC,gBAAAA,CAAC,EAAE8C,UAAL;AAAiB5C,gBAAAA,CAAC,EAAE6C;AAApB,eAAnB;AACH;AACJ;AACJ,SAXD,CAWE,OAAOV,GAAP,EAAY;AACVI,UAAAA,kBAAkB,GAAG,IAArB;AACAC,UAAAA,eAAe,GAAGL,GAAlB;AACH,SAdD,SAcU;AACN,cAAI;AACA,gBAAI,CAACG,0BAAD,IAA+BG,UAAU,CAACL,MAA9C,EAAsD;AAClDK,cAAAA,UAAU,CAACL,MAAX;AACH;AACJ,WAJD,SAIU;AACN,gBAAIG,kBAAJ,EAAwB;AACpB,oBAAMC,eAAN;AACH;AACJ;AACJ;;AAED/B,QAAAA,SAAS,CAACyB,IAAV,CAAe,KAAK5C,UAAL,CAAgB+C,aAAhB,EAA+BhE,MAA/B,EAAuCqC,KAAvC,CAAf;AACAA,QAAAA,KAAK,IAAI,CAAT;AACH;;AAED,aAAOtG,OAAO,CAACU,OAAR,CAAgBmF,aAAhB,CACH,GADG,EAEH;AAAE1G,QAAAA,GAAG,EAAE8E;AAAP,OAFG,EAGHoC,SAHG,CAAP;AAKH;AA3FF,GAtJqB,EAkPrB;AACClH,IAAAA,GAAG,EAAE,QADN;AAECX,IAAAA,KAAK,EAAE,SAASmK,MAAT,GAAkB;AACrB,aAAO3I,OAAO,CAACU,OAAR,CAAgBmF,aAAhB,CACH,GADG,EAEH,IAFG,EAGH,KAAKI,WAAL,EAHG,CAAP;AAKH;AARF,GAlPqB,CAAZ,CAAZ;;AA6PA,SAAO/D,SAAP;AACH,CAvQe,CAuQdlC,OAAO,CAACU,OAAR,CAAgBkI,SAvQF,CAAhB;;AAyQArK,OAAO,CAACmC,OAAR,GAAkBwB,SAAlB;AAGAA,SAAS,CAAC2G,SAAV,GAAsB;AAClB;AACJ;AACA;AACIC,EAAAA,OAAO,EAAE5I,WAAW,CAACQ,OAAZ,CAAoBqI,IAJX;;AAMlB;AACJ;AACA;AACIrG,EAAAA,MAAM,EAAExC,WAAW,CAACQ,OAAZ,CAAoBsI,UAApB,CAA+B7I,OAAO,CAAC0D,UAAvC,EAAmDoF,UATzC;;AAWlB;AACJ;AACA;AACA;AACA;AACIC,EAAAA,IAAI,EAAEhJ,WAAW,CAACQ,OAAZ,CAAoByI,MAApB,CAA2BF,UAhBf;AAgB2B;;AAE7C;AACJ;AACA;AACA;AACA;AACA;AACA;AACI/F,EAAAA,OAAO,EAAEhD,WAAW,CAACQ,OAAZ,CAAoB0I,OAApB,CAA4BlJ,WAAW,CAACQ,OAAZ,CAAoByI,MAAhD,CAzBS;;AA2BlB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI3E,EAAAA,KAAK,EAAEtE,WAAW,CAACQ,OAAZ,CAAoB2I,SAApB,CAA8B,CAACnJ,WAAW,CAACQ,OAAZ,CAAoB4I,MAArB,EAA6BpJ,WAAW,CAACQ,OAAZ,CAAoB6I,IAAjD,EAAuDrJ,WAAW,CAACQ,OAAZ,CAAoBsI,UAApB,CAA+B5I,OAAO,CAACqE,MAAvC,CAAvD,CAA9B,CA5DW;;AA8DlB;AACJ;AACA;AACI1B,EAAAA,aAAa,EAAE7C,WAAW,CAACQ,OAAZ,CAAoB8I,KAApB,CAA0B,CAAC,YAAD,EAAe,gBAAf,EAAiC,aAAjC,EAAgD,eAAhD,EAAiE,mBAAjE,EAAsF,iBAAtF,EAAyG,qBAAzG,EAAgI,aAAhI,EAA+I,gBAA/I,EAAiK,gBAAjK,EAAmL,cAAnL,EAAmM,aAAnM,EAAkN,WAAlN,EAA+N,gBAA/N,EAAiP,iBAAjP,CAA1B,CAjEG;;AAmElB;AACJ;AACA;AACA;AACA;AACA;AACA;AACIjD,EAAAA,SAAS,EAAErG,WAAW,CAACQ,OAAZ,CAAoBqI,IA1Eb;;AA4ElB;AACJ;AACA;AACA;AACA;AACA;AACI9F,EAAAA,SAAS,EAAE/C,WAAW,CAACQ,OAAZ,CAAoByI,MAlFb;;AAoFlB;AACJ;AACA;AACA;AACI7E,EAAAA,iBAAiB,EAAEpE,WAAW,CAACQ,OAAZ,CAAoB6I,IAxFrB;;AA0FlB;AACJ;AACA;AACA;AACA;AACIvG,EAAAA,SAAS,EAAE9C,WAAW,CAACQ,OAAZ,CAAoByI,MA/Fb;;AAiGlB;AACJ;AACA;AACA;AACIjF,EAAAA,iBAAiB,EAAEhE,WAAW,CAACQ,OAAZ,CAAoB6I,IArGrB;;AAuGlB;AACJ;AACA;AACI1G,EAAAA,SAAS,EAAE3C,WAAW,CAACQ,OAAZ,CAAoB6I,IA1Gb;;AA4GlB;AACJ;AACA;AACIzG,EAAAA,MAAM,EAAE5C,WAAW,CAACQ,OAAZ,CAAoB6I,IA/GV;;AAiHlB;AACJ;AACA;AACI3G,EAAAA,KAAK,EAAE1C,WAAW,CAACQ,OAAZ,CAAoB+I;AApHT,CAAtB;AAuHAvH,SAAS,CAACwH,YAAV,GAAyB;AACrBZ,EAAAA,OAAO,EAAE,IADY;AAErB5F,EAAAA,OAAO,EAAE,CAAC,OAAD,CAFY;AAGrByG,EAAAA,MAAM,EAAE,IAHa;AAIrB5G,EAAAA,aAAa,EAAE,aAJM;AAKrBwD,EAAAA,SAAS,EAAE;AALU,CAAzB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _underscore = require(\"underscore\");\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _d3Shape = require(\"d3-shape\");\n\nvar _merge = require(\"merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _styler = require(\"../js/styler\");\n\nvar _util = require(\"../js/util\");\n\nvar _curve = require(\"../js/curve\");\n\nvar _curve2 = _interopRequireDefault(_curve);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  Copyright (c) 2015-present, The Regents of the University of California,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  through Lawrence Berkeley National Laboratory (subject to receipt\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  of any required approvals from the U.S. Dept. of Energy).\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  LICENSE file in the root directory of this source tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar defaultStyle = {\n    normal: { stroke: \"steelblue\", fill: \"none\", strokeWidth: 1 },\n    highlighted: { stroke: \"#5a98cb\", fill: \"none\", strokeWidth: 1 },\n    selected: { stroke: \"steelblue\", fill: \"none\", strokeWidth: 2 },\n    muted: { stroke: \"steelblue\", fill: \"none\", opacity: 0.4, strokeWidth: 1 }\n};\n\n/**\n * The `<LineChart>` component is able to display multiple columns of a TimeSeries\n * as separate line charts.\n *\n * The `<LineChart>` should be used within `<ChartContainer>` etc., as this will\n * construct the horizontal and vertical axis, and manage other elements.\n *\n * Here is an example of two columns of a TimeSeries being plotted with the `<LineChart>`:\n *\n * ```\n  <ChartContainer timeRange={this.state.timerange} >\n    <ChartRow height=\"200\">\n      <YAxis id=\"y\" label=\"Price ($)\" min={0.5} max={1.5} format=\"$,.2f\" />\n      <Charts>\n        <LineChart\n          axis=\"y\"\n          breakLine={false}\n          series={currencySeries}\n          columns={[\"aud\", \"euro\"]}\n          style={style}\n          interpolation=\"curveBasis\" />\n      </Charts>\n    </ChartRow>\n  </ChartContainer>\n * ```\n */\n\nvar LineChart = function (_React$Component) {\n    _inherits(LineChart, _React$Component);\n\n    function LineChart() {\n        _classCallCheck(this, LineChart);\n\n        return _possibleConstructorReturn(this, (LineChart.__proto__ || Object.getPrototypeOf(LineChart)).apply(this, arguments));\n    }\n\n    _createClass(LineChart, [{\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps) {\n            var newSeries = nextProps.series;\n            var oldSeries = this.props.series;\n\n            var width = nextProps.width;\n            var timeScale = nextProps.timeScale;\n            var yScale = nextProps.yScale;\n            var interpolation = nextProps.interpolation;\n            var highlight = nextProps.highlight;\n            var selection = nextProps.selection;\n            var columns = nextProps.columns;\n\n            // What changed?\n            var widthChanged = this.props.width !== width;\n            var timeScaleChanged = (0, _util.scaleAsString)(this.props.timeScale) !== (0, _util.scaleAsString)(timeScale);\n            var yAxisScaleChanged = this.props.yScale !== yScale;\n            var interpolationChanged = this.props.interpolation !== interpolation;\n            var highlightChanged = this.props.highlight !== highlight;\n            var selectionChanged = this.props.selection !== selection;\n            var columnsChanged = this.props.columns !== columns;\n\n            var seriesChanged = false;\n            if (oldSeries.size() !== newSeries.size()) {\n                seriesChanged = true;\n            } else {\n                seriesChanged = !_pondjs.TimeSeries.is(oldSeries, newSeries);\n            }\n\n            return widthChanged || seriesChanged || timeScaleChanged || yAxisScaleChanged || interpolationChanged || highlightChanged || selectionChanged || columnsChanged;\n        }\n    }, {\n        key: \"handleHover\",\n        value: function handleHover(e, column) {\n            if (this.props.onHighlightChange) {\n                this.props.onHighlightChange(column);\n            }\n        }\n    }, {\n        key: \"handleHoverLeave\",\n        value: function handleHoverLeave() {\n            if (this.props.onHighlightChange) {\n                this.props.onHighlightChange(null);\n            }\n        }\n    }, {\n        key: \"handleClick\",\n        value: function handleClick(e, column) {\n            e.stopPropagation();\n            if (this.props.onSelectionChange) {\n                this.props.onSelectionChange(column);\n            }\n        }\n    }, {\n        key: \"providedPathStyleMap\",\n        value: function providedPathStyleMap(column) {\n            var style = {};\n            if (this.props.style) {\n                if (this.props.style instanceof _styler.Styler) {\n                    style = this.props.style.lineChartStyle()[column];\n                } else if (_underscore2.default.isFunction(this.props.style)) {\n                    style = this.props.style(column);\n                } else if (_underscore2.default.isObject(this.props.style)) {\n                    style = this.props.style ? this.props.style[column] : defaultStyle;\n                }\n            }\n            return style;\n        }\n\n        /**\n         * Returns the style used for drawing the path\n         */\n\n    }, {\n        key: \"pathStyle\",\n        value: function pathStyle(column) {\n            var style = void 0;\n\n            var styleMap = this.providedPathStyleMap(column);\n            var isHighlighted = this.props.highlight && column === this.props.highlight;\n            var isSelected = this.props.selection && column === this.props.selection;\n\n            if (this.props.selection) {\n                if (isSelected) {\n                    style = (0, _merge2.default)(true, defaultStyle.selected, styleMap.selected ? styleMap.selected : {});\n                } else if (isHighlighted) {\n                    style = (0, _merge2.default)(true, defaultStyle.highlighted, styleMap.highlighted ? styleMap.highlighted : {});\n                } else {\n                    style = (0, _merge2.default)(true, defaultStyle.muted, styleMap.muted ? styleMap.muted : {});\n                }\n            } else if (isHighlighted) {\n                style = (0, _merge2.default)(true, defaultStyle.highlighted, styleMap.highlighted ? styleMap.highlighted : {});\n            } else {\n                style = (0, _merge2.default)(true, defaultStyle.normal, styleMap.normal);\n            }\n\n            style.pointerEvents = \"none\";\n\n            return style;\n        }\n    }, {\n        key: \"renderPath\",\n        value: function renderPath(data, column, key) {\n            var _this2 = this;\n\n            var hitStyle = {\n                stroke: \"white\",\n                fill: \"none\",\n                opacity: 0.0,\n                strokeWidth: 7,\n                cursor: \"crosshair\",\n                pointerEvents: \"stroke\"\n            };\n\n            // D3 generates each path\n            var path = (0, _d3Shape.line)().curve(_curve2.default[this.props.interpolation]).x(function (d) {\n                return _this2.props.timeScale(d.x);\n            }).y(function (d) {\n                return _this2.props.yScale(d.y);\n            })(data);\n\n            return _react2.default.createElement(\n                \"g\",\n                { key: key },\n                _react2.default.createElement(\"path\", { d: path, style: this.pathStyle(column) }),\n                _react2.default.createElement(\"path\", {\n                    d: path,\n                    style: hitStyle,\n                    onClick: function onClick(e) {\n                        return _this2.handleClick(e, column);\n                    },\n                    onMouseLeave: function onMouseLeave() {\n                        return _this2.handleHoverLeave();\n                    },\n                    onMouseMove: function onMouseMove(e) {\n                        return _this2.handleHover(e, column);\n                    }\n                })\n            );\n        }\n    }, {\n        key: \"renderLines\",\n        value: function renderLines() {\n            var _this3 = this;\n\n            return _underscore2.default.map(this.props.columns, function (column) {\n                return _this3.renderLine(column);\n            });\n        }\n    }, {\n        key: \"renderLine\",\n        value: function renderLine(column) {\n            var pathLines = [];\n            var count = 1;\n            if (this.props.breakLine) {\n                // Remove nulls and NaNs from the line by generating a break in the line\n                var currentPoints = null;\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = this.props.series.events()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var d = _step.value;\n\n                        var timestamp = new Date(d.begin().getTime() + (d.end().getTime() - d.begin().getTime()) / 2);\n                        var value = d.get(column);\n                        var badPoint = _underscore2.default.isNull(value) || _underscore2.default.isNaN(value) || !_underscore2.default.isFinite(value);\n                        if (!badPoint) {\n                            if (!currentPoints) currentPoints = [];\n                            currentPoints.push({ x: timestamp, y: value });\n                        } else if (currentPoints) {\n                            if (currentPoints.length > 1) {\n                                pathLines.push(this.renderPath(currentPoints, column, count));\n                                count += 1;\n                            }\n                            currentPoints = null;\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n\n                if (currentPoints && currentPoints.length > 1) {\n                    pathLines.push(this.renderPath(currentPoints, column, count));\n                    count += 1;\n                }\n            } else {\n                // Ignore nulls and NaNs in the line\n                var cleanedPoints = [];\n                var _iteratorNormalCompletion2 = true;\n                var _didIteratorError2 = false;\n                var _iteratorError2 = undefined;\n\n                try {\n                    for (var _iterator2 = this.props.series.events()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                        var _d = _step2.value;\n\n                        var _timestamp = new Date(_d.begin().getTime() + (_d.end().getTime() - _d.begin().getTime()) / 2);\n                        var _value = _d.get(column);\n                        var _badPoint = _underscore2.default.isNull(_value) || _underscore2.default.isNaN(_value) || !_underscore2.default.isFinite(_value);\n                        if (!_badPoint) {\n                            cleanedPoints.push({ x: _timestamp, y: _value });\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError2 = true;\n                    _iteratorError2 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                            _iterator2.return();\n                        }\n                    } finally {\n                        if (_didIteratorError2) {\n                            throw _iteratorError2;\n                        }\n                    }\n                }\n\n                pathLines.push(this.renderPath(cleanedPoints, column, count));\n                count += 1;\n            }\n\n            return _react2.default.createElement(\n                \"g\",\n                { key: column },\n                pathLines\n            );\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            return _react2.default.createElement(\n                \"g\",\n                null,\n                this.renderLines()\n            );\n        }\n    }]);\n\n    return LineChart;\n}(_react2.default.Component);\n\nexports.default = LineChart;\n\n\nLineChart.propTypes = {\n    /**\n     * Show or hide this chart\n     */\n    visible: _propTypes2.default.bool,\n\n    /**\n     * What [Pond TimeSeries](https://esnet-pondjs.appspot.com/#/timeseries) data to visualize\n     */\n    series: _propTypes2.default.instanceOf(_pondjs.TimeSeries).isRequired,\n\n    /**\n     * Reference to the axis which provides the vertical scale for drawing.\n     * e.g. specifying `axis=\"trafficRate\"` would refer the y-scale of the YAxis\n     * with id=\"trafficRate\".\n     */\n    axis: _propTypes2.default.string.isRequired, // eslint-disable-line\n\n    /**\n     * Which columns from the series to draw.\n     * \n     * NOTE : Columns can't have periods because periods \n     * represent a path to deep data in the underlying events \n     * (i.e. reference into nested data structures)\n     */\n    columns: _propTypes2.default.arrayOf(_propTypes2.default.string),\n\n    /**\n     * The styles to apply to the underlying SVG lines. This is a mapping\n     * of column names to objects with style attributes, in the following\n     * format:\n     *\n     * ```\n     * const style = {\n     *     in: {\n     *         normal: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 1},\n     *         highlighted: {stroke: \"#5a98cb\", fill: \"none\", strokeWidth: 1},\n     *         selected: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 1},\n     *         muted: {stroke: \"steelblue\", fill: \"none\", opacity: 0.4, strokeWidth: 1}\n     *     },\n     *     out: {\n     *         ...\n     *     }\n     * };\n     *\n     *  <LineChart style={style} ... />\n     * ```\n     *\n     * Alternatively, you can pass in a `Styler`. For example:\n     *\n     * ```\n     * const currencyStyle = Styler([\n     *     {key: \"aud\", color: \"steelblue\", width: 1, dashed: true},\n     *     {key: \"euro\", color: \"#F68B24\", width: 2}\n     * ]);\n     *\n     * <LineChart columns={[\"aud\", \"euro\"]} style={currencyStyle} ... />\n     *\n     * ```\n     */\n    style: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.func, _propTypes2.default.instanceOf(_styler.Styler)]),\n\n    /**\n     * Any of D3's interpolation modes.\n     */\n    interpolation: _propTypes2.default.oneOf([\"curveBasis\", \"curveBasisOpen\", \"curveBundle\", \"curveCardinal\", \"curveCardinalOpen\", \"curveCatmullRom\", \"curveCatmullRomOpen\", \"curveLinear\", \"curveMonotoneX\", \"curveMonotoneY\", \"curveNatural\", \"curveRadial\", \"curveStep\", \"curveStepAfter\", \"curveStepBefore\"]),\n\n    /**\n     * The determines how to handle bad/missing values in the supplied\n     * TimeSeries. A missing value can be null or NaN. If breakLine\n     * is set to true (the default) then the line will be broken on either\n     * side of the bad value(s). If breakLine is false bad values\n     * are simply removed and the adjoining points are connected.\n     */\n    breakLine: _propTypes2.default.bool,\n\n    /**\n     * The selected item, which will be rendered in the \"selected\" style.\n     * If a line is selected, all other lines will be rendered in the \"muted\" style.\n     *\n     * See also `onSelectionChange`\n     */\n    selection: _propTypes2.default.string,\n\n    /**\n     * A callback that will be called when the selection changes. It will be called\n     * with the column corresponding to the line being clicked.\n     */\n    onSelectionChange: _propTypes2.default.func,\n\n    /**\n     * The highlighted column, which will be rendered in the \"highlighted\" style.\n     *\n     * See also `onHighlightChange`\n     */\n    highlight: _propTypes2.default.string,\n\n    /**\n     * A callback that will be called when the hovered over line changes.\n     * It will be called with the corresponding column.\n     */\n    onHighlightChange: _propTypes2.default.func,\n\n    /**\n     * [Internal] The timeScale supplied by the surrounding ChartContainer\n     */\n    timeScale: _propTypes2.default.func,\n\n    /**\n     * [Internal] The yScale supplied by the associated YAxis\n     */\n    yScale: _propTypes2.default.func,\n\n    /**\n     * [Internal] The width supplied by the surrounding ChartContainer\n     */\n    width: _propTypes2.default.number\n};\n\nLineChart.defaultProps = {\n    visible: true,\n    columns: [\"value\"],\n    smooth: true,\n    interpolation: \"curveLinear\",\n    breakLine: true\n};"]},"metadata":{},"sourceType":"script"}