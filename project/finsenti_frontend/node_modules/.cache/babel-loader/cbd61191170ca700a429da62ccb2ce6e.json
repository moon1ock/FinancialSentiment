{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _merge = require(\"merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _util = require(\"../js/util\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n *  Copyright (c) 2016, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n/**\n * Renders a brush with the range defined in the prop `timeRange`.\n */\n\n\nvar MultiBrush = function (_React$Component) {\n  _inherits(MultiBrush, _React$Component);\n\n  function MultiBrush(props) {\n    _classCallCheck(this, MultiBrush);\n\n    var _this = _possibleConstructorReturn(this, (MultiBrush.__proto__ || Object.getPrototypeOf(MultiBrush)).call(this, props));\n\n    _this.hasNullBrush = function () {\n      return (_this.props.timeRanges || []).length > 0 && _this.props.timeRanges[_this.props.timeRanges.length - 1] == null;\n    };\n\n    _this.handleMouseClick = function (e, brushIndex) {\n      if (_this.props.onTimeRangeClicked) {\n        _this.props.onTimeRangeClicked(brushIndex);\n      }\n    };\n\n    _this.state = {\n      isBrushing: false\n    };\n    _this.handleBrushMouseDown = _this.handleBrushMouseDown.bind(_this);\n    _this.handleOverlayMouseDown = _this.handleOverlayMouseDown.bind(_this);\n    _this.handleHandleMouseDown = _this.handleHandleMouseDown.bind(_this);\n    _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n    _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n    return _this;\n  }\n\n  _createClass(MultiBrush, [{\n    key: \"viewport\",\n    value: function viewport() {\n      var _props = this.props,\n          width = _props.width,\n          timeScale = _props.timeScale;\n      var viewBeginTime = timeScale.invert(0);\n      var viewEndTime = timeScale.invert(width);\n      return new _pondjs.TimeRange(viewBeginTime, viewEndTime);\n    } //\n    // Event handlers\n    //\n\n  }, {\n    key: \"handleBrushMouseDown\",\n    value: function handleBrushMouseDown(e, brush_idx) {\n      e.preventDefault();\n      var x = e.pageX,\n          y = e.pageY;\n      var xy0 = [Math.round(x), Math.round(y)];\n      var begin = +this.props.timeRanges[brush_idx].begin();\n      var end = +this.props.timeRanges[brush_idx].end();\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n      this.setState({\n        isBrushing: true,\n        brushingInitializationSite: \"brush\",\n        initialBrushBeginTime: begin,\n        initialBrushEndTime: end,\n        initialBrushXYPosition: xy0,\n        brushIndex: brush_idx\n      });\n    }\n  }, {\n    key: \"handleOverlayMouseDown\",\n    value: function handleOverlayMouseDown(e) {\n      if (this.props.allowFreeDrawing || this.hasNullBrush()) {\n        e.preventDefault();\n        var offset = (0, _util.getElementOffset)(this.overlay);\n        var x = e.pageX - offset.left;\n        var t = this.props.timeScale.invert(x).getTime();\n        document.addEventListener(\"mouseup\", this.handleMouseUp);\n        var drawingPosition = this.props.allowFreeDrawing ? this.props.timeRanges.length : this.props.timeRanges.length - 1;\n        this.setState({\n          isBrushing: true,\n          brushingInitializationSite: \"overlay\",\n          initialBrushBeginTime: t,\n          initialBrushEndTime: t,\n          initialBrushXYPosition: null,\n          brushIndex: drawingPosition\n        });\n      }\n    }\n  }, {\n    key: \"handleHandleMouseDown\",\n    value: function handleHandleMouseDown(e, handle, brushIndex) {\n      e.preventDefault();\n      var x = e.pageX,\n          y = e.pageY;\n      var xy0 = [Math.round(x), Math.round(y)];\n      var begin = this.props.timeRanges[brushIndex].begin().getTime();\n      var end = this.props.timeRanges[brushIndex].end().getTime();\n      document.addEventListener(\"mouseover\", this.handleMouseMove);\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n      this.setState({\n        isBrushing: true,\n        brushingInitializationSite: \"handle-\" + handle,\n        initialBrushBeginTime: begin,\n        initialBrushEndTime: end,\n        initialBrushXYPosition: xy0,\n        brushIndex: brushIndex\n      });\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      document.removeEventListener(\"mouseover\", this.handleMouseMove);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp);\n      var brushing_is = this.state.brushIndex;\n      this.setState({\n        isBrushing: false,\n        brushingInitializationSite: null,\n        initialBrushBeginTime: null,\n        initialBrushEndTime: null,\n        initialBrushXYPosition: null,\n        brushIndex: null\n      }, function () {\n        if (_this2.props.onUserMouseUp) {\n          _this2.props.onUserMouseUp(brushing_is);\n        }\n      });\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e) {\n      e.preventDefault();\n      var x = e.pageX;\n      var y = e.pageY;\n      var xy = [Math.round(x), Math.round(y)];\n      var viewport = this.viewport();\n\n      if (this.state.isBrushing) {\n        var newBegin = void 0;\n        var newEnd = void 0;\n        var tb = this.state.initialBrushBeginTime;\n        var te = this.state.initialBrushEndTime;\n\n        if (this.state.brushingInitializationSite === \"overlay\") {\n          var offset = (0, _util.getElementOffset)(this.overlay);\n          var xx = e.pageX - offset.left;\n          var t = this.props.timeScale.invert(xx).getTime();\n\n          if (t < tb) {\n            newBegin = t < viewport.begin().getTime() ? viewport.begin() : t;\n            newEnd = tb > viewport.end().getTime() ? viewport.end() : tb;\n          } else {\n            newBegin = tb < viewport.begin().getTime() ? viewport.begin() : tb;\n            newEnd = t > viewport.end().getTime() ? viewport.end() : t;\n          }\n        } else {\n          var xy0 = this.state.initialBrushXYPosition;\n          var timeOffset = this.props.timeScale.invert(xy0[0]).getTime() - this.props.timeScale.invert(xy[0]).getTime(); // Constrain\n\n          var startOffsetConstraint = timeOffset;\n          var endOffsetConstrain = timeOffset;\n\n          if (tb - timeOffset < viewport.begin()) {\n            startOffsetConstraint = tb - viewport.begin().getTime();\n          }\n\n          if (te - timeOffset > viewport.end()) {\n            endOffsetConstrain = te - viewport.end().getTime();\n          }\n\n          newBegin = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-left\" ? parseInt(tb - startOffsetConstraint, 10) : tb;\n          newEnd = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-right\" ? parseInt(te - endOffsetConstrain, 10) : te; // Swap if needed\n\n          if (newBegin > newEnd) {\n            ;\n            var _ref = [newEnd, newBegin];\n            newBegin = _ref[0];\n            newEnd = _ref[1];\n          }\n        }\n\n        if (this.props.onTimeRangeChanged) {\n          this.props.onTimeRangeChanged(new _pondjs.TimeRange(newBegin, newEnd), this.state.brushIndex);\n        }\n      }\n    } //\n    // Render\n    //\n\n  }, {\n    key: \"renderOverlay\",\n    value: function renderOverlay() {\n      var _this3 = this;\n\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height;\n      var cursor = void 0;\n\n      switch (this.state.brushingInitializationSite) {\n        case \"handle-right\":\n        case \"handle-left\":\n          cursor = \"ew-resize\";\n          break;\n\n        case \"brush\":\n          cursor = \"move\";\n          break;\n\n        default:\n          cursor = this.props.allowFreeDrawing || this.hasNullBrush() ? \"crosshair\" : \"default\";\n      }\n\n      var overlayStyle = {\n        fill: \"white\",\n        opacity: 0,\n        cursor: cursor\n      };\n      return _react2.default.createElement(\"rect\", {\n        ref: function ref(c) {\n          _this3.overlay = c;\n        },\n        x: 0,\n        y: 0,\n        width: width,\n        height: height,\n        style: overlayStyle,\n        onClick: this.handleMouseClick,\n        onMouseDown: this.handleOverlayMouseDown,\n        onMouseUp: this.handleMouseUp\n      });\n    }\n  }, {\n    key: \"renderBrush\",\n    value: function renderBrush(timeRange, idx) {\n      var _this4 = this;\n\n      var _props3 = this.props,\n          timeScale = _props3.timeScale,\n          height = _props3.height;\n\n      if (!timeRange) {\n        return _react2.default.createElement(\"g\", null);\n      }\n\n      var cursor = void 0;\n\n      switch (this.state.brushingInitializationSite) {\n        case \"handle-right\":\n        case \"handle-left\":\n          cursor = \"ew-resize\";\n          break;\n\n        case \"overlay\":\n          cursor = this.props.allowFreeDrawing || this.hasNullBrush() ? \"crosshair\" : \"default\";\n          break;\n\n        default:\n          cursor = \"move\";\n      } // Style of the brush area\n\n\n      var brushDefaultStyle = {\n        fill: \"#777\",\n        fillOpacity: 0.3,\n        stroke: \"#fff\",\n        shapeRendering: \"crispEdges\",\n        cursor: cursor\n      };\n      var userStyle = this.props.style ? this.props.style(idx) : {};\n      var brushStyle = (0, _merge2.default)(true, brushDefaultStyle, userStyle);\n\n      if (!this.viewport().disjoint(timeRange)) {\n        var range = timeRange.intersection(this.viewport());\n        var begin = range.begin();\n        var end = range.end();\n        var _ref2 = [timeScale(begin), 0],\n            x = _ref2[0],\n            y = _ref2[1];\n        var endPos = timeScale(end);\n        var width = endPos - x;\n\n        if (width < 1) {\n          width = 1;\n        }\n\n        var bounds = {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        };\n        return _react2.default.createElement(\"rect\", _extends({}, bounds, {\n          key: idx + \"-\" + brushStyle,\n          style: brushStyle,\n          pointerEvents: \"all\",\n          onClick: function onClick(e) {\n            return _this4.handleMouseClick(e, idx);\n          },\n          onMouseDown: function onMouseDown(e) {\n            return _this4.handleBrushMouseDown(e, idx);\n          },\n          onMouseUp: this.handleMouseUp\n        }));\n      }\n\n      return _react2.default.createElement(\"g\", null);\n    }\n  }, {\n    key: \"renderHandles\",\n    value: function renderHandles(timeRange, idx) {\n      var _this5 = this;\n\n      var _props4 = this.props,\n          timeScale = _props4.timeScale,\n          height = _props4.height;\n\n      if (!timeRange) {\n        return _react2.default.createElement(\"g\", null);\n      } // Style of the handles\n\n\n      var handleStyle = {\n        fill: \"white\",\n        opacity: 0,\n        cursor: \"ew-resize\"\n      };\n\n      if (!this.viewport().disjoint(timeRange)) {\n        var range = timeRange.intersection(this.viewport());\n\n        var _range$toJSON = range.toJSON(),\n            _range$toJSON2 = _slicedToArray(_range$toJSON, 2),\n            begin = _range$toJSON2[0],\n            end = _range$toJSON2[1];\n\n        var _ref3 = [timeScale(begin), 0],\n            x = _ref3[0],\n            y = _ref3[1];\n        var endPos = timeScale(end);\n        var width = endPos - x;\n\n        if (width < 1) {\n          width = 1;\n        }\n\n        var handleSize = this.props.handleSize;\n        var leftHandleBounds = {\n          x: x - 1,\n          y: y,\n          width: handleSize,\n          height: height\n        };\n        var rightHandleBounds = {\n          x: x + (width - handleSize),\n          y: y,\n          width: handleSize + 1,\n          height: height\n        };\n        return _react2.default.createElement(\"g\", null, _react2.default.createElement(\"rect\", _extends({}, leftHandleBounds, {\n          style: handleStyle,\n          pointerEvents: \"all\",\n          onMouseDown: function onMouseDown(e) {\n            return _this5.handleHandleMouseDown(e, \"left\", idx);\n          },\n          onMouseUp: this.handleMouseUp\n        })), _react2.default.createElement(\"rect\", _extends({}, rightHandleBounds, {\n          style: handleStyle,\n          pointerEvents: \"all\",\n          onMouseDown: function onMouseDown(e) {\n            return _this5.handleHandleMouseDown(e, \"right\", idx);\n          },\n          onMouseUp: this.handleMouseUp\n        })));\n      }\n\n      return _react2.default.createElement(\"g\", null);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return _react2.default.createElement(\"g\", {\n        onMouseMove: this.handleMouseMove\n      }, this.renderOverlay(), (this.props.timeRanges || []).map(function (timeRange, idx) {\n        return _react2.default.createElement(\"g\", {\n          key: \"multibrush_\" + idx\n        }, _this6.renderBrush(timeRange, idx), _this6.renderHandles(timeRange, idx));\n      }));\n    }\n  }]);\n\n  return MultiBrush;\n}(_react2.default.Component);\n\nexports.default = MultiBrush;\nMultiBrush.propTypes = {\n  /**\n   * The timeranges for the brushes. Typically you would maintain this\n   * as state on the surrounding page, since it would likely control\n   * another page element, such as the range of the main chart. See\n   * also `onTimeRangeChanged()` for receiving notification of the\n   * brush range being changed by the user.\n   *\n   * Takes an array of Pond TimeRange object.\n   */\n  timeRanges: _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_pondjs.TimeRange)),\n\n  /**\n   * The brush is rendered as an SVG rect. You can specify the style\n   * of this rect using this prop. The brush style is a function that you\n   * provide. It will be called with the index of the TimeRange, corresponding\n   * to those in the `timeRanges` prop.\n   */\n  style: _propTypes2.default.func,\n  //eslint-disable-line\n\n  /**\n   * The size of the invisible side handles. Defaults to 6 pixels.\n   */\n  handleSize: _propTypes2.default.number,\n\n  /**\n   * If this prop is false, you will only be able to draw a new brush if the last position of the timeRanges\n   * array is equal to null, otherwise it will allow the free drawing and the index passed to onTimeRangeChanged\n   * will the equal to the length of the timeRanges array\n   */\n  allowFreeDrawing: _propTypes2.default.bool,\n\n  /**\n   * A callback which will be called if the brush range is changed by\n   * the user. It is called with a Pond TimeRange object and the index position of\n   * the brush in the timeRanges prop.\n   */\n  onTimeRangeChanged: _propTypes2.default.func,\n\n  /**\n   * when user stop drawing or dragging box\n   */\n  onUserMouseUp: _propTypes2.default.func,\n\n  /**\n   * When the user clicks one of the TimeRanges\n   */\n  onTimeRangeClicked: _propTypes2.default.func,\n\n  /**\n   * [Internal] The timeScale supplied by the surrounding ChartContainer\n   */\n  timeScale: _propTypes2.default.func,\n\n  /**\n   * [Internal] The width supplied by the surrounding ChartContainer\n   */\n  width: _propTypes2.default.number,\n\n  /**\n   * [Internal] The height supplied by the surrounding ChartContainer\n   */\n  height: _propTypes2.default.number\n};\nMultiBrush.defaultProps = {\n  handleSize: 6,\n  allowFreeDrawing: true\n};","map":{"version":3,"sources":["/Users/nicholasraffone/Documents/swefall2021/finalproj/FinancialSentiment/fin_sentiment_front/node_modules/react-timeseries-charts/lib/components/MultiBrush.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_merge","require","_merge2","_interopRequireDefault","_react","_react2","_propTypes","_propTypes2","_pondjs","_util","obj","__esModule","default","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","MultiBrush","_React$Component","_this","getPrototypeOf","hasNullBrush","timeRanges","handleMouseClick","e","brushIndex","onTimeRangeClicked","state","isBrushing","handleBrushMouseDown","bind","handleOverlayMouseDown","handleHandleMouseDown","handleMouseUp","handleMouseMove","viewport","_props","width","timeScale","viewBeginTime","invert","viewEndTime","TimeRange","brush_idx","preventDefault","x","pageX","y","pageY","xy0","Math","round","begin","end","document","addEventListener","setState","brushingInitializationSite","initialBrushBeginTime","initialBrushEndTime","initialBrushXYPosition","allowFreeDrawing","offset","getElementOffset","overlay","left","t","getTime","drawingPosition","handle","_this2","removeEventListener","brushing_is","onUserMouseUp","xy","newBegin","newEnd","tb","te","xx","timeOffset","startOffsetConstraint","endOffsetConstrain","parseInt","_ref","onTimeRangeChanged","renderOverlay","_this3","_props2","height","cursor","overlayStyle","fill","opacity","createElement","ref","c","style","onClick","onMouseDown","onMouseUp","renderBrush","timeRange","idx","_this4","_props3","brushDefaultStyle","fillOpacity","stroke","shapeRendering","userStyle","brushStyle","disjoint","range","intersection","_ref2","endPos","bounds","pointerEvents","renderHandles","_this5","_props4","handleStyle","_range$toJSON","toJSON","_range$toJSON2","_ref3","handleSize","leftHandleBounds","rightHandleBounds","render","_this6","onMouseMove","map","Component","propTypes","arrayOf","instanceOf","func","number","bool","defaultProps"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _merge = require(\"merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _pondjs = require(\"pondjs\");\n\nvar _util = require(\"../js/util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  Copyright (c) 2016, The Regents of the University of California,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  through Lawrence Berkeley National Laboratory (subject to receipt\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  of any required approvals from the U.S. Dept. of Energy).\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  LICENSE file in the root directory of this source tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * Renders a brush with the range defined in the prop `timeRange`.\n */\nvar MultiBrush = function (_React$Component) {\n    _inherits(MultiBrush, _React$Component);\n\n    function MultiBrush(props) {\n        _classCallCheck(this, MultiBrush);\n\n        var _this = _possibleConstructorReturn(this, (MultiBrush.__proto__ || Object.getPrototypeOf(MultiBrush)).call(this, props));\n\n        _this.hasNullBrush = function () {\n            return (_this.props.timeRanges || []).length > 0 && _this.props.timeRanges[_this.props.timeRanges.length - 1] == null;\n        };\n\n        _this.handleMouseClick = function (e, brushIndex) {\n            if (_this.props.onTimeRangeClicked) {\n                _this.props.onTimeRangeClicked(brushIndex);\n            }\n        };\n\n        _this.state = {\n            isBrushing: false\n        };\n\n        _this.handleBrushMouseDown = _this.handleBrushMouseDown.bind(_this);\n        _this.handleOverlayMouseDown = _this.handleOverlayMouseDown.bind(_this);\n        _this.handleHandleMouseDown = _this.handleHandleMouseDown.bind(_this);\n        _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n        _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n        return _this;\n    }\n\n    _createClass(MultiBrush, [{\n        key: \"viewport\",\n        value: function viewport() {\n            var _props = this.props,\n                width = _props.width,\n                timeScale = _props.timeScale;\n\n            var viewBeginTime = timeScale.invert(0);\n            var viewEndTime = timeScale.invert(width);\n            return new _pondjs.TimeRange(viewBeginTime, viewEndTime);\n        }\n\n        //\n        // Event handlers\n        //\n\n    }, {\n        key: \"handleBrushMouseDown\",\n        value: function handleBrushMouseDown(e, brush_idx) {\n            e.preventDefault();\n\n            var x = e.pageX,\n                y = e.pageY;\n\n            var xy0 = [Math.round(x), Math.round(y)];\n            var begin = +this.props.timeRanges[brush_idx].begin();\n            var end = +this.props.timeRanges[brush_idx].end();\n\n            document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n            this.setState({\n                isBrushing: true,\n                brushingInitializationSite: \"brush\",\n                initialBrushBeginTime: begin,\n                initialBrushEndTime: end,\n                initialBrushXYPosition: xy0,\n                brushIndex: brush_idx\n            });\n        }\n    }, {\n        key: \"handleOverlayMouseDown\",\n        value: function handleOverlayMouseDown(e) {\n            if (this.props.allowFreeDrawing || this.hasNullBrush()) {\n                e.preventDefault();\n\n                var offset = (0, _util.getElementOffset)(this.overlay);\n                var x = e.pageX - offset.left;\n                var t = this.props.timeScale.invert(x).getTime();\n\n                document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n                var drawingPosition = this.props.allowFreeDrawing ? this.props.timeRanges.length : this.props.timeRanges.length - 1;\n\n                this.setState({\n                    isBrushing: true,\n                    brushingInitializationSite: \"overlay\",\n                    initialBrushBeginTime: t,\n                    initialBrushEndTime: t,\n                    initialBrushXYPosition: null,\n                    brushIndex: drawingPosition\n                });\n            }\n        }\n    }, {\n        key: \"handleHandleMouseDown\",\n        value: function handleHandleMouseDown(e, handle, brushIndex) {\n            e.preventDefault();\n\n            var x = e.pageX,\n                y = e.pageY;\n\n            var xy0 = [Math.round(x), Math.round(y)];\n            var begin = this.props.timeRanges[brushIndex].begin().getTime();\n            var end = this.props.timeRanges[brushIndex].end().getTime();\n\n            document.addEventListener(\"mouseover\", this.handleMouseMove);\n            document.addEventListener(\"mouseup\", this.handleMouseUp);\n\n            this.setState({\n                isBrushing: true,\n                brushingInitializationSite: \"handle-\" + handle,\n                initialBrushBeginTime: begin,\n                initialBrushEndTime: end,\n                initialBrushXYPosition: xy0,\n                brushIndex: brushIndex\n            });\n        }\n    }, {\n        key: \"handleMouseUp\",\n        value: function handleMouseUp(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            document.removeEventListener(\"mouseover\", this.handleMouseMove);\n            document.removeEventListener(\"mouseup\", this.handleMouseUp);\n\n            var brushing_is = this.state.brushIndex;\n            this.setState({\n                isBrushing: false,\n                brushingInitializationSite: null,\n                initialBrushBeginTime: null,\n                initialBrushEndTime: null,\n                initialBrushXYPosition: null,\n                brushIndex: null\n            }, function () {\n                if (_this2.props.onUserMouseUp) {\n                    _this2.props.onUserMouseUp(brushing_is);\n                }\n            });\n        }\n    }, {\n        key: \"handleMouseMove\",\n        value: function handleMouseMove(e) {\n            e.preventDefault();\n\n            var x = e.pageX;\n            var y = e.pageY;\n            var xy = [Math.round(x), Math.round(y)];\n            var viewport = this.viewport();\n\n            if (this.state.isBrushing) {\n                var newBegin = void 0;\n                var newEnd = void 0;\n\n                var tb = this.state.initialBrushBeginTime;\n                var te = this.state.initialBrushEndTime;\n\n                if (this.state.brushingInitializationSite === \"overlay\") {\n                    var offset = (0, _util.getElementOffset)(this.overlay);\n                    var xx = e.pageX - offset.left;\n                    var t = this.props.timeScale.invert(xx).getTime();\n                    if (t < tb) {\n                        newBegin = t < viewport.begin().getTime() ? viewport.begin() : t;\n                        newEnd = tb > viewport.end().getTime() ? viewport.end() : tb;\n                    } else {\n                        newBegin = tb < viewport.begin().getTime() ? viewport.begin() : tb;\n                        newEnd = t > viewport.end().getTime() ? viewport.end() : t;\n                    }\n                } else {\n                    var xy0 = this.state.initialBrushXYPosition;\n                    var timeOffset = this.props.timeScale.invert(xy0[0]).getTime() - this.props.timeScale.invert(xy[0]).getTime();\n\n                    // Constrain\n                    var startOffsetConstraint = timeOffset;\n                    var endOffsetConstrain = timeOffset;\n                    if (tb - timeOffset < viewport.begin()) {\n                        startOffsetConstraint = tb - viewport.begin().getTime();\n                    }\n                    if (te - timeOffset > viewport.end()) {\n                        endOffsetConstrain = te - viewport.end().getTime();\n                    }\n\n                    newBegin = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-left\" ? parseInt(tb - startOffsetConstraint, 10) : tb;\n                    newEnd = this.state.brushingInitializationSite === \"brush\" || this.state.brushingInitializationSite === \"handle-right\" ? parseInt(te - endOffsetConstrain, 10) : te;\n\n                    // Swap if needed\n                    if (newBegin > newEnd) {\n                        ;\n                        var _ref = [newEnd, newBegin];\n                        newBegin = _ref[0];\n                        newEnd = _ref[1];\n                    }\n                }\n\n                if (this.props.onTimeRangeChanged) {\n                    this.props.onTimeRangeChanged(new _pondjs.TimeRange(newBegin, newEnd), this.state.brushIndex);\n                }\n            }\n        }\n\n        //\n        // Render\n        //\n\n    }, {\n        key: \"renderOverlay\",\n        value: function renderOverlay() {\n            var _this3 = this;\n\n            var _props2 = this.props,\n                width = _props2.width,\n                height = _props2.height;\n\n\n            var cursor = void 0;\n            switch (this.state.brushingInitializationSite) {\n                case \"handle-right\":\n                case \"handle-left\":\n                    cursor = \"ew-resize\";\n                    break;\n                case \"brush\":\n                    cursor = \"move\";\n                    break;\n                default:\n                    cursor = this.props.allowFreeDrawing || this.hasNullBrush() ? \"crosshair\" : \"default\";\n            }\n\n            var overlayStyle = {\n                fill: \"white\",\n                opacity: 0,\n                cursor: cursor\n            };\n            return _react2.default.createElement(\"rect\", {\n                ref: function ref(c) {\n                    _this3.overlay = c;\n                },\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                style: overlayStyle,\n                onClick: this.handleMouseClick,\n                onMouseDown: this.handleOverlayMouseDown,\n                onMouseUp: this.handleMouseUp\n            });\n        }\n    }, {\n        key: \"renderBrush\",\n        value: function renderBrush(timeRange, idx) {\n            var _this4 = this;\n\n            var _props3 = this.props,\n                timeScale = _props3.timeScale,\n                height = _props3.height;\n\n\n            if (!timeRange) {\n                return _react2.default.createElement(\"g\", null);\n            }\n\n            var cursor = void 0;\n            switch (this.state.brushingInitializationSite) {\n                case \"handle-right\":\n                case \"handle-left\":\n                    cursor = \"ew-resize\";\n                    break;\n                case \"overlay\":\n                    cursor = this.props.allowFreeDrawing || this.hasNullBrush() ? \"crosshair\" : \"default\";\n                    break;\n                default:\n                    cursor = \"move\";\n            }\n\n            // Style of the brush area\n            var brushDefaultStyle = {\n                fill: \"#777\",\n                fillOpacity: 0.3,\n                stroke: \"#fff\",\n                shapeRendering: \"crispEdges\",\n                cursor: cursor\n            };\n            var userStyle = this.props.style ? this.props.style(idx) : {};\n            var brushStyle = (0, _merge2.default)(true, brushDefaultStyle, userStyle);\n\n            if (!this.viewport().disjoint(timeRange)) {\n                var range = timeRange.intersection(this.viewport());\n                var begin = range.begin();\n                var end = range.end();\n                var _ref2 = [timeScale(begin), 0],\n                    x = _ref2[0],\n                    y = _ref2[1];\n\n                var endPos = timeScale(end);\n                var width = endPos - x;\n                if (width < 1) {\n                    width = 1;\n                }\n\n                var bounds = { x: x, y: y, width: width, height: height };\n\n                return _react2.default.createElement(\"rect\", _extends({}, bounds, {\n                    key: idx + \"-\" + brushStyle,\n                    style: brushStyle,\n                    pointerEvents: \"all\",\n                    onClick: function onClick(e) {\n                        return _this4.handleMouseClick(e, idx);\n                    },\n                    onMouseDown: function onMouseDown(e) {\n                        return _this4.handleBrushMouseDown(e, idx);\n                    },\n                    onMouseUp: this.handleMouseUp\n                }));\n            }\n            return _react2.default.createElement(\"g\", null);\n        }\n    }, {\n        key: \"renderHandles\",\n        value: function renderHandles(timeRange, idx) {\n            var _this5 = this;\n\n            var _props4 = this.props,\n                timeScale = _props4.timeScale,\n                height = _props4.height;\n\n\n            if (!timeRange) {\n                return _react2.default.createElement(\"g\", null);\n            }\n\n            // Style of the handles\n            var handleStyle = {\n                fill: \"white\",\n                opacity: 0,\n                cursor: \"ew-resize\"\n            };\n\n            if (!this.viewport().disjoint(timeRange)) {\n                var range = timeRange.intersection(this.viewport());\n\n                var _range$toJSON = range.toJSON(),\n                    _range$toJSON2 = _slicedToArray(_range$toJSON, 2),\n                    begin = _range$toJSON2[0],\n                    end = _range$toJSON2[1];\n\n                var _ref3 = [timeScale(begin), 0],\n                    x = _ref3[0],\n                    y = _ref3[1];\n\n                var endPos = timeScale(end);\n\n                var width = endPos - x;\n                if (width < 1) {\n                    width = 1;\n                }\n\n                var handleSize = this.props.handleSize;\n\n                var leftHandleBounds = { x: x - 1, y: y, width: handleSize, height: height };\n                var rightHandleBounds = {\n                    x: x + (width - handleSize),\n                    y: y,\n                    width: handleSize + 1,\n                    height: height\n                };\n\n                return _react2.default.createElement(\n                    \"g\",\n                    null,\n                    _react2.default.createElement(\"rect\", _extends({}, leftHandleBounds, {\n                        style: handleStyle,\n                        pointerEvents: \"all\",\n                        onMouseDown: function onMouseDown(e) {\n                            return _this5.handleHandleMouseDown(e, \"left\", idx);\n                        },\n                        onMouseUp: this.handleMouseUp\n                    })),\n                    _react2.default.createElement(\"rect\", _extends({}, rightHandleBounds, {\n                        style: handleStyle,\n                        pointerEvents: \"all\",\n                        onMouseDown: function onMouseDown(e) {\n                            return _this5.handleHandleMouseDown(e, \"right\", idx);\n                        },\n                        onMouseUp: this.handleMouseUp\n                    }))\n                );\n            }\n            return _react2.default.createElement(\"g\", null);\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this6 = this;\n\n            return _react2.default.createElement(\n                \"g\",\n                { onMouseMove: this.handleMouseMove },\n                this.renderOverlay(),\n                (this.props.timeRanges || []).map(function (timeRange, idx) {\n                    return _react2.default.createElement(\n                        \"g\",\n                        { key: \"multibrush_\" + idx },\n                        _this6.renderBrush(timeRange, idx),\n                        _this6.renderHandles(timeRange, idx)\n                    );\n                })\n            );\n        }\n    }]);\n\n    return MultiBrush;\n}(_react2.default.Component);\n\nexports.default = MultiBrush;\n\n\nMultiBrush.propTypes = {\n    /**\n     * The timeranges for the brushes. Typically you would maintain this\n     * as state on the surrounding page, since it would likely control\n     * another page element, such as the range of the main chart. See\n     * also `onTimeRangeChanged()` for receiving notification of the\n     * brush range being changed by the user.\n     *\n     * Takes an array of Pond TimeRange object.\n     */\n    timeRanges: _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_pondjs.TimeRange)),\n\n    /**\n     * The brush is rendered as an SVG rect. You can specify the style\n     * of this rect using this prop. The brush style is a function that you\n     * provide. It will be called with the index of the TimeRange, corresponding\n     * to those in the `timeRanges` prop.\n     */\n    style: _propTypes2.default.func, //eslint-disable-line\n\n    /**\n     * The size of the invisible side handles. Defaults to 6 pixels.\n     */\n    handleSize: _propTypes2.default.number,\n\n    /**\n     * If this prop is false, you will only be able to draw a new brush if the last position of the timeRanges\n     * array is equal to null, otherwise it will allow the free drawing and the index passed to onTimeRangeChanged\n     * will the equal to the length of the timeRanges array\n     */\n    allowFreeDrawing: _propTypes2.default.bool,\n\n    /**\n     * A callback which will be called if the brush range is changed by\n     * the user. It is called with a Pond TimeRange object and the index position of\n     * the brush in the timeRanges prop.\n     */\n    onTimeRangeChanged: _propTypes2.default.func,\n\n    /**\n     * when user stop drawing or dragging box\n     */\n    onUserMouseUp: _propTypes2.default.func,\n\n    /**\n     * When the user clicks one of the TimeRanges\n     */\n    onTimeRangeClicked: _propTypes2.default.func,\n\n    /**\n     * [Internal] The timeScale supplied by the surrounding ChartContainer\n     */\n    timeScale: _propTypes2.default.func,\n\n    /**\n     * [Internal] The width supplied by the surrounding ChartContainer\n     */\n    width: _propTypes2.default.number,\n\n    /**\n     * [Internal] The height supplied by the surrounding ChartContainer\n     */\n    height: _propTypes2.default.number\n};\n\nMultiBrush.defaultProps = {\n    handleSize: 6,\n    allowFreeDrawing: true\n};"]},"metadata":{},"sourceType":"script"}